!function(){function t(t,e,i){function n(t){this._startTime=t||+new Date}function r(){}function o(t,e){this.ULTRA=50,this.DEBUG=100,this.INFO=200,this.NOTICE=250,this.WARNING=300,this.ERROR=400,this.CRITICAL=500,this.ALERT=550,this.EMERGENCY=600,this._levels={50:"ULTRA",100:"DEBUG",200:"INFO",250:"NOTICE",300:"WARNING",400:"ERROR",500:"CRITICAL",550:"ALERT",600:"EMERGENCY"},this._level="undefined"==typeof t?this.WARNING:this.getLevelByName(t),this._startTime=e||+new Date,this._buffer=[],this._useBuffer=!0}function s(t,e){this._manager=t,this._channel=e}function a(t,e,i){this._logger=t.getLogger("cookies"),this._document=e.document,this._testCookieName=i||"check"}function h(t){this._logger=t.getLogger("events"),this._subscribers={}}function c(t,e,i){if("string"!=typeof t)throw"name must be a string";if(t.length<1)throw"empty name";if(this._name=t,"function"!=typeof e)throw"callback must be a function";if(this._callback=e,"undefined"==typeof i)i=0;else{if(isNaN(i))throw"priority must be a number";i=Math.round(i)}this._priority=i}function u(t,e){this._name=t,this.data="object"==typeof e?e:{},this._isPropagating=!0,this._result=!1}var l;try{var d=t.document.createElement("iframe");t.document.documentElement.appendChild(d);var p=d.contentWindow;l=p.Array;var f=d.parentNode||d.parent;f.removeChild(d)}catch(g){l=Array}this.window=t,n.prototype.getMs=function(){return+new Date-this._startTime},n.prototype.getS=function(){return Math.round(this.getMs()/1e3)},this.time=new n(i);var _=function(){function t(t){return null==t?String(t):Y[Z.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){var e=!!t&&"length"in t&&t.length,n=C.type(t);return"function"!=n&&!i(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function a(t){return z.call(t,function(t){return null!=t})}function h(t){return t.length>0?C.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in O?O[t]:O[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function d(t,e){return"number"!=typeof e||R[c(t)]?e:e+"px"}function p(t){var e,i;return N[t]||(e=P.createElement(t),P.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),N[t]=i),N[t]}function f(t){return"children"in t?D.call(t.children):C.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function g(t,e){var i,n=t?t.length:0;for(i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function _(t,e,i){for(k in e)i&&(o(e[k])||tt(e[k]))?(o(e[k])&&!o(t[k])&&(t[k]={}),tt(e[k])&&!tt(t[k])&&(t[k]=[]),_(t[k],e[k],i)):e[k]!==S&&(t[k]=e[k])}function m(t,e){return null==e?C(t):C(t).filter(e)}function v(t,i,n,r){return e(i)?i.call(t,n,r):i}function y(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function w(t,e){var i=t.className||"",n=i&&i.baseVal!==S;return e===S?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?C.parseJSON(t):t):t}catch(e){return t}}function x(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)x(t.childNodes[i],e)}var S,k,C,A,T,E,I=new l,M=I.concat,z=I.filter,D=I.slice,P=window.document,N={},O={},R={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},$=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,W=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,j=/^(?:body|html)$/i,B=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],F=["after","prepend","before","append"],V=P.createElement("table"),H=P.createElement("tr"),J={tr:P.createElement("tbody"),tbody:V,thead:V,tfoot:V,td:H,th:H,"*":P.createElement("div")},q=/complete|loaded|interactive/,G=/^[\w-]*$/,Y={},Z=Y.toString,X={},K=P.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},tt=Array.isArray||function(t){return t instanceof Array};return X.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,r=t.parentNode,o=!r;return o&&(r=K).appendChild(t),n=~X.qsa(r,e).indexOf(t),o&&K.removeChild(t),n},T=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},E=function(t){return z.call(t,function(e,i){return t.indexOf(e)==i})},X.fragment=function(t,e,i){var n,r,s;return L.test(t)&&(n=C(P.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(W,"<$1></$2>")),e===S&&(e=$.test(t)&&RegExp.$1),e in J||(e="*"),s=J[e],s.innerHTML=""+t,n=C.each(D.call(s.childNodes),function(){s.removeChild(this)})),o(i)&&(r=C(n),C.each(i,function(t,e){U.indexOf(t)>-1?r[t](e):r.attr(t,e)})),n},X.Z=function(t,e){return new g(t,e)},X.isZ=function(t){return t instanceof X.Z},X.init=function(t,i){var n;if(!t)return X.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&$.test(t))n=X.fragment(t,RegExp.$1,i),t=null;else{if(i!==S)return C(i).find(t);n=X.qsa(P,t)}else{if(e(t))return C(P).ready(t);if(X.isZ(t))return t;if(tt(t))n=a(t);else if(r(t))n=[t],t=null;else if($.test(t))n=X.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==S)return C(i).find(t);n=X.qsa(P,t)}}return X.Z(n,t)},C=function(t,e){return X.init(t,e)},C.extend=function(t){var e,i=D.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){_(t,i,e)}),t},X.qsa=function(t,e){var i,n="#"==e[0],r=!n&&"."==e[0],o=n||r?e.slice(1):e,s=G.test(o);return t.getElementById&&s&&n?(i=t.getElementById(o))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:D.call(s&&!n&&t.getElementsByClassName?r?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},C.contains=P.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},C.type=t,C.isFunction=e,C.isWindow=i,C.isArray=tt,C.isPlainObject=o,C.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},C.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},C.inArray=function(t,e,i){return I.indexOf.call(e,t,i)},C.camelCase=T,C.trim=function(t){return null==t?"":String.prototype.trim.call(t)},C.uuid=0,C.support={},C.expr={},C.noop=function(){},C.map=function(t,e){var i,n,r,o=[];if(s(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&o.push(i);else for(r in t)i=e(t[r],r),null!=i&&o.push(i);return h(o)},C.each=function(t,e){var i,n;if(s(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},C.grep=function(t,e){return z.call(t,e)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()}),C.fn={constructor:X.Z,length:0,forEach:I.forEach,reduce:I.reduce,push:I.push,sort:I.sort,splice:I.splice,indexOf:I.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=X.isZ(e)?e.toArray():e;return M.apply(X.isZ(this)?this.toArray():this,i)},map:function(t){return C(C.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return C(D.apply(this,arguments))},ready:function(t){return q.test(P.readyState)&&P.body?t(C):P.addEventListener("DOMContentLoaded",function(){t(C)},!1),this},get:function(t){return t===S?D.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return I.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):C(z.call(this,function(e){return X.matches(e,t)}))},add:function(t,e){return C(E(this.concat(C(t,e))))},is:function(t){return this.length>0&&X.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==S)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):s(t)&&e(t.item)?D.call(t):C(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return C(i)},has:function(t){return this.filter(function(){return r(t)?C.contains(this,t):C(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:C(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:C(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?C(t).filter(function(){var t=this;return I.some.call(i,function(e){return C.contains(e,t)})}):1==this.length?C(X.qsa(this[0],t)):this.map(function(){return X.qsa(this,t)}):C()},closest:function(t,e){var i=[],r="object"==typeof t&&C(t);return this.each(function(o,s){for(;s&&!(r?r.indexOf(s)>=0:X.matches(s,t));)s=s!==e&&!n(s)&&s.parentNode;s&&i.indexOf(s)<0&&i.push(s)}),C(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=C.map(i,function(t){if((t=t.parentNode)&&!n(t)&&e.indexOf(t)<0)return e.push(t),t});return m(e,t)},parent:function(t){return m(E(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||D.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,e){return z.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return C.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=C(t).get(0),r=n.parentNode||this.length>1;return this.each(function(e){C(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){C(this[0]).before(t=C(t));for(var e;(e=t.children()).length;)t=e.first();C(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=C(this),r=n.contents(),o=i?t.call(this,e):t;r.length?r.wrapAll(o):n.append(o)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=C(this);(t===S?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return C(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return C(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;C(this).empty().append(v(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=v(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(r(t))for(k in t)y(this,k,t[k]);else y(this,t,v(this,e,i,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:S},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){y(this,t)},this)})},prop:function(t,e){return t=Q[t]||t,1 in arguments?this.each(function(i){this[t]=v(this,e,i,this[t])}):this[0]&&this[0][t]},removeProp:function(t){return t=Q[t]||t,this.each(function(){delete this[t]})},data:function(t,e){var i="data-"+t.replace(B,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?b(n):S},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=v(this,t,e,this.value)})):this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=C(this),n=v(this,t,e,i.offset()),r=i.offsetParent().offset(),o={top:n.top-r.top,left:n.left-r.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)});if(!this.length)return null;if(P.documentElement!==this[0]&&!C.contains(P.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[T(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(tt(e)){if(!n)return;var r={},o=getComputedStyle(n,"");return C.each(e,function(t,e){r[e]=n.style[T(e)]||o.getPropertyValue(e)}),r}}var s="";if("string"==t(e))i||0===i?s=c(e)+":"+d(e,i):this.each(function(){this.style.removeProperty(c(e))});else for(k in e)e[k]||0===e[k]?s+=c(k)+":"+d(k,e[k])+";":this.each(function(){this.style.removeProperty(c(k))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(C(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&I.some.call(this,function(t){return this.test(w(t))},u(t))},addClass:function(t){return t?this.each(function(e){if("className"in this){A=[];var i=w(this),n=v(this,t,e,i);n.split(/\s+/g).forEach(function(t){C(this).hasClass(t)||A.push(t)},this),A.length&&w(this,i+(i?" ":"")+A.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===S)return w(this,"");A=w(this),v(this,t,e,A).split(/\s+/g).forEach(function(t){A=A.replace(u(t)," ")}),w(this,A.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=C(this),r=v(this,t,i,w(this));r.split(/\s+/g).forEach(function(t){(e===S?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===S?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===S?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=j.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(C(t).css("margin-top"))||0,i.left-=parseFloat(C(t).css("margin-left"))||0,n.top+=parseFloat(C(e[0]).css("border-top-width"))||0,n.left+=parseFloat(C(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||P.body;t&&!j.test(t.nodeName)&&"static"==C(t).css("position");)t=t.offsetParent;return t})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});C.fn[t]=function(r){var o,s=this[0];return r===S?i(s)?s["inner"+e]:n(s)?s.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){s=C(this),s.css(t,v(this,r,e,s[t]()))})}}),F.forEach(function(e,i){var n=i%2;C.fn[e]=function(){var e,r,o=C.map(arguments,function(i){var n=[];return e=t(i),"array"==e?(i.forEach(function(t){return t.nodeType!==S?n.push(t):C.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(X.fragment(t)))}),n):"object"==e||null==i?i:X.fragment(i)}),s=this.length>1;return o.length<1?this:this.each(function(t,e){r=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var a=C.contains(P.documentElement,r);o.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return C(t).remove();r.insertBefore(t,e),a&&x(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}})})})},C.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return C(t)[e](this),this}}),X.Z.prototype=g.prototype=C.fn,X.uniq=E,X.deserializeValue=b,C.zepto=X,C}();!function(t){function e(t){return t._zid||(t._zid=d++)}function i(t,i,o,s){if(i=n(i),i.ns)var a=r(i.ns);return(_[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||a.test(t.ns))&&(!o||e(t.fn)===e(o))&&(!s||t.sel==s)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!v&&t.e in y||!!e}function s(t){return w[t]||v&&y[t]||t}function a(i,r,a,h,u,d,p){var f=e(i),g=_[f]||(_[f]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(a);var r=n(e);r.fn=a,r.sel=u,r.e in w&&(a=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return r.fn.apply(this,arguments)}),r.del=d;var f=d||a;r.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=h;var e=f.apply(i,t._args==l?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=g.length,g.push(r),"addEventListener"in i&&i.addEventListener(s(r.e),r.proxy,o(r,p))})}function h(t,n,r,a,h){var c=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,r,a).forEach(function(e){delete _[c][e.i],"removeEventListener"in t&&t.removeEventListener(s(e.e),e.proxy,o(e,h))})})}function c(e,i){return!i&&e.isDefaultPrevented||(i||(i=e),t.each(k,function(t,n){var r=i[t];e[t]=function(){return this[n]=b,r&&r.apply(i,arguments)},e[n]=x}),e.timeStamp||(e.timeStamp=Date.now()),(i.defaultPrevented!==l?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=b)),e}function u(t){var e,i={originalEvent:t};for(e in t)S.test(e)||t[e]===l||(i[e]=t[e]);return c(i,t)}var l,d=1,p=Array.prototype.slice,f=t.isFunction,g=function(t){return"string"==typeof t},_={},m={},v="onfocusin"in window,y={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",t.event={add:a,remove:h},t.proxy=function(i,n){var r=2 in arguments&&p.call(arguments,2);if(f(i)){var o=function(){return i.apply(n,r?r.concat(p.call(arguments)):arguments)};return o._zid=e(i),o}if(g(n))return r?(r.unshift(i[n],i),t.proxy.apply(null,r)):t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var b=function(){return!0},x=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,r,o){var s,c,d=this;return e&&!g(e)?(t.each(e,function(t,e){d.on(t,i,n,e,o)}),d):(g(i)||f(r)||r===!1||(r=n,n=i,i=l),r!==l&&n!==!1||(r=n,n=l),r===!1&&(r=x),d.each(function(l,d){o&&(s=function(t){return h(d,t.type,r),r.apply(this,arguments)}),i&&(c=function(e){var n,o=t(e.target).closest(i,d).get(0);if(o&&o!==d)return n=t.extend(u(e),{currentTarget:o,liveFired:d}),(s||r).apply(o,[n].concat(p.call(arguments,1)))}),a(d,e,r,n,i,c||s)}))},t.fn.off=function(e,i,n){var r=this;return e&&!g(e)?(t.each(e,function(t,e){r.off(t,i,e)}),r):(g(i)||f(n)||n===!1||(n=i,i=l),n===!1&&(n=x),r.each(function(){h(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=g(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=i,this.each(function(){e.type in y&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var r,o;return this.each(function(s,a){r=u(g(e)?t.Event(e):e),r._args=n,r.target=a,t.each(i(a,e.type||e),function(t,e){if(o=e.proxy(r),r.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){g(t)||(e=t,t=e.type);var i=document.createEvent(m[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),c(i)}}(_),function(t){function e(e,i,n){var r=t.Event(i);return t(e).trigger(r,n),!r.isDefaultPrevented()}function i(t,i,n,r){if(t.global)return e(i||y,n,r)}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function o(t,e){var n=e.context;return e.beforeSend.call(n,t,e)!==!1&&i(e,n,"ajaxBeforeSend",[t,e])!==!1&&void i(e,n,"ajaxSend",[t,e])}function s(t,e,n,r){var o=n.context,s="success";n.success.call(o,t,s,e),r&&r.resolveWith(o,[t,s,e]),i(n,o,"ajaxSuccess",[e,n,t]),h(s,e,n)}function a(t,e,n,r,o){var s=r.context;r.error.call(s,n,e,t),o&&o.rejectWith(s,[n,e,t]),i(r,s,"ajaxError",[n,r,t||e]),h(e,n,r)}function h(t,e,n){var o=n.context;n.complete.call(o,e,t),i(n,o,"ajaxComplete",[e,n]),r(n)}function c(t,e,i){if(i.dataFilter==u)return t;var n=i.context;return i.dataFilter.call(n,t,e)}function u(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==k?"html":t==S?"json":b.test(t)?"script":x.test(t)&&"xml")||"text"}function d(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=d(e.url,e.data),e.data=void 0)}function f(e,i,n,r){return t.isFunction(i)&&(r=n,n=i,i=void 0),t.isFunction(n)||(r=n,n=void 0),{url:e,data:i,success:n,dataType:r}}function g(e,i,n,r){var o,s=t.isArray(i),a=t.isPlainObject(i);t.each(i,function(i,h){o=t.type(h),r&&(i=n?r:r+"["+(a||"object"==o||"array"==o?i:"")+"]"),!r&&s?e.add(h.name,h.value):"array"==o||!n&&"object"==o?g(e,h,n,i):e.add(i,h)})}var _,m,v=+new Date,y=window.document,w=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,S="application/json",k="text/html",C=/^\s*$/,A=y.createElement("a");A.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,r,h=e.jsonpCallback,c=(t.isFunction(h)?h():h)||"Zepto"+v++,u=y.createElement("script"),l=window[c],d=function(e){t(u).triggerHandler("error",e||"abort")},p={abort:d};return i&&i.promise(p),t(u).on("load error",function(o,h){clearTimeout(r),t(u).off().remove(),"error"!=o.type&&n?s(n[0],p,e,i):a(null,h||"error",p,e,i),window[c]=l,n&&t.isFunction(l)&&l(n[0]),l=n=void 0}),o(p,e)===!1?(d("abort"),p):(window[c]=function(){n=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+c),y.head.appendChild(u),e.timeout>0&&(r=setTimeout(function(){d("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:k,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:u},t.ajax=function(e){var i,r,h=t.extend({},e||{}),f=t.Deferred&&t.Deferred();for(_ in t.ajaxSettings)void 0===h[_]&&(h[_]=t.ajaxSettings[_]);n(h),h.crossDomain||(i=y.createElement("a"),i.href=h.url,i.href=i.href,h.crossDomain=A.protocol+"//"+A.host!=i.protocol+"//"+i.host),h.url||(h.url=window.location.toString()),(r=h.url.indexOf("#"))>-1&&(h.url=h.url.slice(0,r)),p(h);var g=h.dataType,v=/\?.+=\?/.test(h.url);if(v&&(g="jsonp"),h.cache!==!1&&(e&&e.cache===!0||"script"!=g&&"jsonp"!=g)||(h.url=d(h.url,"_="+Date.now())),"jsonp"==g)return v||(h.url=d(h.url,h.jsonp?h.jsonp+"=?":h.jsonp===!1?"":"callback=?")),t.ajaxJSONP(h,f);var w,b=h.accepts[g],x={},S=function(t,e){x[t.toLowerCase()]=[t,e]},k=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:window.location.protocol,T=h.xhr(),E=T.setRequestHeader;if(f&&f.promise(T),h.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",b||"*/*"),(b=h.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(b)),(h.contentType||h.contentType!==!1&&h.data&&"GET"!=h.type.toUpperCase())&&S("Content-Type",h.contentType||"application/x-www-form-urlencoded"),h.headers)for(m in h.headers)S(m,h.headers[m]);if(T.setRequestHeader=S,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=u,clearTimeout(w);var e,i=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==k){if(g=g||l(h.mimeType||T.getResponseHeader("content-type")),"arraybuffer"==T.responseType||"blob"==T.responseType)e=T.response;else{e=T.responseText;try{e=c(e,g,h),"script"==g?(0,eval)(e):"xml"==g?e=T.responseXML:"json"==g&&(e=C.test(e)?null:t.parseJSON(e))}catch(n){i=n}if(i)return a(i,"parsererror",T,h,f)}s(e,T,h,f)}else a(T.statusText||null,T.status?"error":"abort",T,h,f)}},o(T,h)===!1)return T.abort(),a(null,"abort",T,h,f),T;var I=!("async"in h)||h.async;if(T.open(h.type,h.url,I,h.username,h.password),h.xhrFields)for(m in h.xhrFields)T[m]=h.xhrFields[m];for(m in x)E.apply(T,x[m]);return h.timeout>0&&(w=setTimeout(function(){T.onreadystatechange=u,T.abort(),a(null,"timeout",T,h,f)},h.timeout)),T.send(h.data?h.data:null),T},t.get=function(){return t.ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var r,o=this,s=e.split(/\s/),a=f(e,i,n),h=a.success;return s.length>1&&(a.url=s[0],r=s[1]),a.success=function(e){o.html(r?t("<div>").html(e.replace(w,"")).find(r):e),h&&h.apply(o,arguments)},t.ajax(a),this};var T=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(T(e)+"="+T(i))},g(n,e,i),n.join("&").replace(/%20/g,"+")}}(_),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,i){try{return e(t,i)}catch(n){return null}}}}(),function(t){function e(t,e){var i=this.os={},n=this.browser={},r=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!t.match(/\(Macintosh\; Intel /),a=t.match(/(iPad).*OS\s([\d_]+)/),h=t.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=/Win\d{2}|Windows/.test(e),d=t.match(/Windows Phone ([\d.]+)/),p=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),g=t.match(/Silk\/([\d._]+)/),_=t.match(/(BlackBerry).*Version\/([\d.]+)/),m=t.match(/(BB10).*Version\/([\d.]+)/),v=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),w=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),b=t.match(/Firefox\/([\d.]+)/),x=t.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),S=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),k=!w&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),C=k||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!r)&&(n.version=r[1]),o&&(i.android=!0,i.version=o[2]),c&&!h&&(i.ios=i.iphone=!0,i.version=c[2].replace(/_/g,".")),a&&(i.ios=i.ipad=!0,i.version=a[2].replace(/_/g,".")),h&&(i.ios=i.ipod=!0,i.version=h[3]?h[3].replace(/_/g,"."):null),d&&(i.wp=!0,i.version=d[1]),u&&(i.webos=!0,i.version=u[2]),p&&(i.touchpad=!0),_&&(i.blackberry=!0,i.version=_[2]),m&&(i.bb10=!0,i.version=m[2]),v&&(i.rimtabletos=!0,i.version=v[2]),y&&(n.playbook=!0),f&&(i.kindle=!0,i.version=f[1]),g&&(n.silk=!0,n.version=g[1]),!g&&i.android&&t.match(/Kindle Fire/)&&(n.silk=!0),w&&(n.chrome=!0,n.version=w[1]),b&&(n.firefox=!0,n.version=b[1]),x&&(i.firefoxos=!0,i.version=x[1]),S&&(n.ie=!0,n.version=S[1]),C&&(s||i.ios||l)&&(n.safari=!0,i.ios||(n.version=C[1])),k&&(n.webview=!0),i.tablet=!!(a||y||o&&!t.match(/Mobile/)||b&&t.match(/Tablet/)||S&&!t.match(/Phone/)&&t.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(o||c||u||_||m||w&&t.match(/Android/)||w&&t.match(/CriOS\/([\d.]+)/)||b&&t.match(/Mobile/)||S&&t.match(/Touch/)))}e.call(t,navigator.userAgent,navigator.platform),t.__detect=e}(_),function(t,e){function i(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function n(t){return r?r+t:t.toLowerCase()}var r,o,s,a,h,c,u,l,d,p,f="",g={Webkit:"webkit",Moz:"",O:"o"},_=document.createElement("div"),m=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,v={};_.style.transform===e&&t.each(g,function(t,i){if(_.style[t+"TransitionProperty"]!==e)return f="-"+t.toLowerCase()+"-",r=i,!1}),o=f+"transform",v[s=f+"transition-property"]=v[a=f+"transition-duration"]=v[c=f+"transition-delay"]=v[h=f+"transition-timing-function"]=v[u=f+"animation-name"]=v[l=f+"animation-duration"]=v[p=f+"animation-delay"]=v[d=f+"animation-timing-function"]="",t.fx={off:r===e&&_.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:f,transitionEnd:n("TransitionEnd"),animationEnd:n("AnimationEnd")},t.fn.animate=function(i,n,r,o,s){return t.isFunction(n)&&(o=n,r=e,n=e),t.isFunction(r)&&(o=r,r=e),t.isPlainObject(n)&&(r=n.easing,o=n.complete,s=n.delay,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(i,n,r,o,s)},t.fn.anim=function(n,r,f,g,_){var y,w,b,x={},S="",k=this,C=t.fx.transitionEnd,A=!1;if(r===e&&(r=t.fx.speeds._default/1e3),_===e&&(_=0),t.fx.off&&(r=0),"string"==typeof n)x[u]=n,x[l]=r+"s",x[p]=_+"s",x[d]=f||"linear",C=t.fx.animationEnd;else{w=[];for(y in n)m.test(y)?S+=y+"("+n[y]+") ":(x[y]=n[y],w.push(i(y)));S&&(x[o]=S,w.push(o)),r>0&&"object"==typeof n&&(x[s]=w.join(", "),x[a]=r+"s",x[c]=_+"s",x[h]=f||"linear")}return b=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(C,b)}else t(this).unbind(C,b);A=!0,t(this).css(v),g&&g.call(this)},r>0&&(this.bind(C,b),setTimeout(function(){A||b.call(k)},1e3*(r+_)+25)),this.size()&&this.get(0).clientLeft,this.css(x),r<=0&&setTimeout(function(){k.each(function(){b.call(this)})},0),this},_=null}(_),function(t,e){function i(i,n,r,o,s){"function"!=typeof n||s||(s=n,n=e);var a={opacity:r};return o&&(a.scale=o,i.css(t.fx.cssPrefix+"transform-origin","0 0")),i.animate(a,n,null,s)}function n(e,n,r,o){return i(e,n,0,r,function(){s.call(t(this)),o&&o.call(this)})}var r=window.document,o=(r.documentElement,t.fn.show),s=t.fn.hide,a=t.fn.toggle;t.fn.show=function(t,n){return o.call(this),t===e?t=0:this.css("opacity",0),i(this,t,1,"1,1",n)},t.fn.hide=function(t,i){return t===e?s.call(this):n(this,t,"0,0",i)},t.fn.toggle=function(i,n){return i===e||"boolean"==typeof i?a.call(this,i):this.each(function(){var e=t(this);e["none"==e.css("display")?"show":"hide"](i,n)})},t.fn.fadeTo=function(t,e,n){return i(this,t,e,null,n)},t.fn.fadeIn=function(t,e){var i=this.css("opacity");return i>0?this.css("opacity",0):i=1,o.call(this).fadeTo(t,i,e)},t.fn.fadeOut=function(t,e){return n(this,t,null,e)},t.fn.fadeToggle=function(e,i){return this.each(function(){var n=t(this);n[0==n.css("opacity")||"none"==n.css("display")?"fadeIn":"fadeOut"](e,i);
})}}(_),this.$=_,this.$body=this.$(this.window.document).find("body");var m=function(){function t(t){throw new RangeError(y[t])}function e(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function i(t,i){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(v,".");var o=t.split("."),s=e(o,i).join(".");return r+s}function n(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=t.charCodeAt(r++),e>=55296&&e<=56319&&r<o?(i=t.charCodeAt(r++),56320==(64512&i)?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--)):n.push(e);return n}function r(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function o(t,e,i){var n=0;for(t=i?b(t/p):t>>1,t+=b(t/e);t>w*l>>1;n+=c)t=b(t/w);return b(n+(w+1)*t/(t+d))}function s(e){var i,s,a,d,p,m,v,y,w,S,k,C,A,T,E,I=[];for(e=n(e),C=e.length,i=g,s=0,p=f,m=0;m<C;++m)k=e[m],k<128&&I.push(x(k));for(a=d=I.length,d&&I.push(_);a<C;){for(v=h,m=0;m<C;++m)k=e[m],k>=i&&k<v&&(v=k);for(A=a+1,v-i>b((h-s)/A)&&t("overflow"),s+=(v-i)*A,i=v,m=0;m<C;++m)if(k=e[m],k<i&&++s>h&&t("overflow"),k==i){for(y=s,w=c;S=w<=p?u:w>=p+l?l:w-p,!(y<S);w+=c)E=y-S,T=c-S,I.push(x(r(S+E%T,0))),y=b(E/T);I.push(x(r(y,0))),p=o(s,A,a==d),s=0,++a}++s,++i}return I.join("")}function a(t){return i(t,function(t){return m.test(t)?"xn--"+s(t):t})}var h=2147483647,c=36,u=1,l=26,d=38,p=700,f=72,g=128,_="-",m=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-u,b=Math.floor,x=String.fromCharCode;return{version:"1.4.0 / cropped",encode:a}}(),v=function(t){return t()}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)return void t.set(e.subarray(i,i+n),r);for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){var e,i,n,r,o,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,i,n,r){for(var o=0;o<n;o++)t[r+o]=e[i+o]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],2:[function(t,e,i){"use strict";function n(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i}var r=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var h=new r.Buf8(256),c=0;c<256;c++)h[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;h[254]=h[254]=1,i.string2buf=function(t){var e,i,n,o,s,a=t.length,h=0;for(o=0;o<a;o++)i=t.charCodeAt(o),55296===(64512&i)&&o+1<a&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new r.Buf8(h),s=0,o=0;s<h;o++)i=t.charCodeAt(o),55296===(64512&i)&&o+1<a&&(n=t.charCodeAt(o+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),o++)),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,r,o,s,a=e||t.length,c=new Array(2*a);for(r=0,i=0;i<a;)if(o=t[i++],o<128)c[r++]=o;else if(s=h[o],s>4)c[r++]=65533,i+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&i<a;)o=o<<6|63&t[i++],s--;s>1?c[r++]=65533:o<65536?c[r++]=o:(o-=65536,c[r++]=55296|o>>10&1023,c[r++]=56320|1023&o)}return n(c,r)},i.utf8border=function(t,e){var i;for(e=e||t.length,e>t.length&&(e=t.length),i=e-1;i>=0&&128===(192&t[i]);)i--;return i<0?e:0===i?e:i+h[t[i]]>e?i:e}},{"./common":1}],3:[function(t,e,i){"use strict";function n(t,e,i,n){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==i;){s=i>2e3?2e3:i,i-=s;do r=r+e[n++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0}e.exports=n},{}],4:[function(t,e,i){"use strict";function n(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}function r(t,e,i,n){var r=o,s=n+i;t^=-1;for(var a=n;a<s;a++)t=t>>>8^r[255&(t^e[a])];return t^-1}var o=n();e.exports=r},{}],5:[function(t,e,i){"use strict";function n(t,e){return t.msg=P[e],e}function r(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(I.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function a(t,e){M._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function h(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function u(t,e,i,n){var r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,I.arraySet(e,t.input,t.next_in,r,i),1===t.state.wrap?t.adler=z(t.adler,e,r,i):2===t.state.wrap&&(t.adler=D(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)}function l(t,e){var i,n,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-ut?t.strstart-(t.w_size-ut):0,c=t.window,u=t.w_mask,l=t.prev,d=t.strstart+ct,p=c[o+s-1],f=c[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,c[i+s]===f&&c[i+s-1]===p&&c[i]===c[o]&&c[++i]===c[o+1]){o+=2,i++;do;while(c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&c[++o]===c[++i]&&o<d);if(n=ct-(d-o),o=d-ct,n>s){if(t.match_start=e,s=n,n>=a)break;p=c[o+s-1],f=c[o+s]}}while((e=l[e&u])>h&&0!==--r);return s<=t.lookahead?s:t.lookahead}function d(t){var e,i,n,r,o,s=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ut)){I.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,i=t.hash_size,e=i;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--i);i=s,e=i;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--i);r+=s}if(0===t.strm.avail_in)break;if(i=u(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=i,t.lookahead+t.insert>=ht)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+ht-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<ht)););}while(t.lookahead<ut&&0!==t.strm.avail_in)}function p(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===N)return yt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,a(t,!1),0===t.strm.avail_out))return yt;if(t.strstart-t.block_start>=t.w_size-ut&&(a(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===$?(a(t,!0),0===t.strm.avail_out?bt:xt):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?yt:yt}function f(t,e){for(var i,n;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===N)return yt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-ut&&(t.match_length=l(t,i)),t.match_length>=ht)if(n=M._tr_tally(t,t.strstart-t.match_start,t.match_length-ht),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ht){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(a(t,!1),0===t.strm.avail_out))return yt}return t.insert=t.strstart<ht-1?t.strstart:ht-1,e===$?(a(t,!0),0===t.strm.avail_out?bt:xt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?yt:wt}function g(t,e){for(var i,n,r;;){if(t.lookahead<ut){if(d(t),t.lookahead<ut&&e===N)return yt;if(0===t.lookahead)break}if(i=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ht-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-ut&&(t.match_length=l(t,i),t.match_length<=5&&(t.strategy===H||t.match_length===ht&&t.strstart-t.match_start>4096)&&(t.match_length=ht-1)),t.prev_length>=ht&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-ht,n=M._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ht),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ht-1,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return yt}else if(t.match_available){if(n=M._tr_tally(t,0,t.window[t.strstart-1]),n&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return yt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=M._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ht-1?t.strstart:ht-1,e===$?(a(t,!0),0===t.strm.avail_out?bt:xt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?yt:wt}function _(t,e){for(var i,n,r,o,s=t.window;;){if(t.lookahead<=ct){if(d(t),t.lookahead<=ct&&e===N)return yt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ht&&t.strstart>0&&(r=t.strstart-1,n=s[r],n===s[++r]&&n===s[++r]&&n===s[++r])){o=t.strstart+ct;do;while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<o);t.match_length=ct-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ht?(i=M._tr_tally(t,1,t.match_length-ht),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(a(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===$?(a(t,!0),0===t.strm.avail_out?bt:xt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?yt:wt}function m(t,e){for(var i;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===N)return yt;break}if(t.match_length=0,i=M._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(a(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===$?(a(t,!0),0===t.strm.avail_out?bt:xt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?yt:wt}function v(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function y(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ht-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*st),this.dyn_dtree=new I.Buf16(2*(2*rt+1)),this.bl_tree=new I.Buf16(2*(2*ot+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(at+1),this.heap=new I.Buf16(2*nt+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*nt+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Z,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?dt:mt,t.adler=2===e.wrap?0:1,e.last_flush=N,M._tr_init(e),W):n(t,B)}function x(t){var e=b(t);return e===W&&y(t.state),e}function S(t,e){return t&&t.state?2!==t.state.wrap?B:(t.state.gzhead=e,W):B}function k(t,e,i,r,o,s){if(!t)return B;var a=1;if(e===V&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>K||i!==X||r<8||r>15||e<0||e>9||s<0||s>G)return n(t,B);8===r&&(r=9);var h=new w;return t.state=h,h.strm=t,h.wrap=a,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=o+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+ht-1)/ht),h.window=new I.Buf8(2*h.w_size),h.head=new I.Buf16(h.hash_size),h.prev=new I.Buf16(h.w_size),h.lit_bufsize=1<<o+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new I.Buf8(h.pending_buf_size),h.d_buf=h.lit_bufsize>>1,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=s,h.method=i,x(t)}function C(t,e){return k(t,e,X,Q,tt,Y)}function A(t,e){var i,a,u,l;if(!t||!t.state||e>L||e<0)return t?n(t,B):B;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===vt&&e!==$)return n(t,0===t.avail_out?F:B);if(a.strm=t,i=a.last_flush,a.last_flush=e,a.status===dt)if(2===a.wrap)t.adler=0,h(a,31),h(a,139),h(a,8),a.gzhead?(h(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),h(a,255&a.gzhead.time),h(a,a.gzhead.time>>8&255),h(a,a.gzhead.time>>16&255),h(a,a.gzhead.time>>24&255),h(a,9===a.level?2:a.strategy>=J||a.level<2?4:0),h(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(h(a,255&a.gzhead.extra.length),h(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=D(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=pt):(h(a,0),h(a,0),h(a,0),h(a,0),h(a,0),h(a,9===a.level?2:a.strategy>=J||a.level<2?4:0),h(a,St),a.status=mt);else{var d=X+(a.w_bits-8<<4)<<8,p=-1;p=a.strategy>=J||a.level<2?0:a.level<6?1:6===a.level?2:3,d|=p<<6,0!==a.strstart&&(d|=lt),d+=31-d%31,a.status=mt,c(a,d),0!==a.strstart&&(c(a,t.adler>>>16),c(a,65535&t.adler)),t.adler=1}if(a.status===pt)if(a.gzhead.extra){for(u=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>u&&(t.adler=D(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending!==a.pending_buf_size));)h(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>u&&(t.adler=D(t.adler,a.pending_buf,a.pending-u,u)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ft)}else a.status=ft;if(a.status===ft)if(a.gzhead.name){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(t.adler=D(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,h(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>u&&(t.adler=D(t.adler,a.pending_buf,a.pending-u,u)),0===l&&(a.gzindex=0,a.status=gt)}else a.status=gt;if(a.status===gt)if(a.gzhead.comment){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(t.adler=D(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,h(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>u&&(t.adler=D(t.adler,a.pending_buf,a.pending-u,u)),0===l&&(a.status=_t)}else a.status=_t;if(a.status===_t&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(h(a,255&t.adler),h(a,t.adler>>8&255),t.adler=0,a.status=mt)):a.status=mt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,W}else if(0===t.avail_in&&r(e)<=r(i)&&e!==$)return n(t,F);if(a.status===vt&&0!==t.avail_in)return n(t,F);if(0!==t.avail_in||0!==a.lookahead||e!==N&&a.status!==vt){var f=a.strategy===J?m(a,e):a.strategy===q?_(a,e):E[a.level].func(a,e);if(f!==bt&&f!==xt||(a.status=vt),f===yt||f===bt)return 0===t.avail_out&&(a.last_flush=-1),W;if(f===wt&&(e===O?M._tr_align(a):e!==L&&(M._tr_stored_block(a,0,0,!1),e===R&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,W}return e!==$?W:a.wrap<=0?j:(2===a.wrap?(h(a,255&t.adler),h(a,t.adler>>8&255),h(a,t.adler>>16&255),h(a,t.adler>>24&255),h(a,255&t.total_in),h(a,t.total_in>>8&255),h(a,t.total_in>>16&255),h(a,t.total_in>>24&255)):(c(a,t.adler>>>16),c(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?W:j)}function T(t){var e;return t&&t.state?(e=t.state.status,e!==dt&&e!==pt&&e!==ft&&e!==gt&&e!==_t&&e!==mt&&e!==vt?n(t,B):(t.state=null,e===mt?n(t,U):W)):B}var E,I=t("../utils/common"),M=t("./trees"),z=t("./adler32"),D=t("./crc32"),P=t("./messages"),N=0,O=1,R=3,$=4,L=5,W=0,j=1,B=-2,U=-3,F=-5,V=-1,H=1,J=2,q=3,G=4,Y=0,Z=2,X=8,K=9,Q=15,tt=8,et=29,it=256,nt=it+1+et,rt=30,ot=19,st=2*nt+1,at=15,ht=3,ct=258,ut=ct+ht+1,lt=32,dt=42,pt=69,ft=73,gt=91,_t=103,mt=113,vt=666,yt=1,wt=2,bt=3,xt=4,St=3;E=[new v(0,0,0,0,p),new v(4,4,8,4,f),new v(4,5,16,8,f),new v(4,6,32,32,f),new v(4,4,16,16,g),new v(8,16,32,32,g),new v(8,16,128,128,g),new v(8,32,128,256,g),new v(32,128,258,1024,g),new v(32,258,258,4096,g)],i.deflateInit=C,i.deflateInit2=k,i.deflateReset=x,i.deflateResetKeep=b,i.deflateSetHeader=S,i.deflate=A,i.deflateEnd=T,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(t,e,i){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?ht[t]:ht[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function h(t,e,i){t.bi_valid>Y-i?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>Y-t.bi_valid,t.bi_valid+=i-Y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function c(t,e,i){h(t,i[2*e],i[2*e+1])}function u(t,e){var i=0;do i|=1&t,t>>>=1,i<<=1;while(--e>0);return i>>>1}function l(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function d(t,e){var i,n,r,o,s,a,h=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,l=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,f=e.stat_desc.max_length,g=0;for(o=0;o<=G;o++)t.bl_count[o]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<q;i++)n=t.heap[i],o=h[2*h[2*n+1]+1]+1,o>f&&(o=f,g++),h[2*n+1]=o,n>c||(t.bl_count[o]++,s=0,n>=p&&(s=d[n-p]),a=h[2*n],t.opt_len+=a*(o+s),l&&(t.static_len+=a*(u[2*n+1]+s)));if(0!==g){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,g-=2}while(g>0);for(o=f;0!==o;o--)for(n=t.bl_count[o];0!==n;)r=t.heap[--i],r>c||(h[2*r+1]!==o&&(t.opt_len+=(o-h[2*r+1])*h[2*r],h[2*r+1]=o),n--)}}function p(t,e,i){var n,r,o=new Array(G+1),s=0;for(n=1;n<=G;n++)o[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=u(o[a]++,a))}}function f(){var t,e,i,n,o,s=new Array(G+1);for(i=0,n=0;n<U-1;n++)for(ut[n]=i,t=0;t<1<<et[n];t++)ct[i++]=n;for(ct[i-1]=n,o=0,n=0;n<16;n++)for(lt[n]=o,t=0;t<1<<it[n];t++)ht[o++]=n;for(o>>=7;n<H;n++)for(lt[n]=o<<7,t=0;t<1<<it[n]-7;t++)ht[256+o++]=n;for(e=0;e<=G;e++)s[e]=0;for(t=0;t<=143;)st[2*t+1]=8,t++,s[8]++;for(;t<=255;)st[2*t+1]=9,t++,s[9]++;for(;t<=279;)st[2*t+1]=7,t++,s[7]++;for(;t<=287;)st[2*t+1]=8,t++,s[8]++;for(p(st,V+1,s),t=0;t<H;t++)at[2*t+1]=5,at[2*t]=u(t,5);dt=new r(st,et,F+1,V,G),pt=new r(at,it,0,H,G),ft=new r(new Array(0),nt,0,J,Z)}function g(t){var e;for(e=0;e<V;e++)t.dyn_ltree[2*e]=0;for(e=0;e<H;e++)t.dyn_dtree[2*e]=0;for(e=0;e<J;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*X]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function _(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,i,n){_(t),n&&(a(t,i),a(t,~i)),D.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}function v(t,e,i,n){var r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]}function y(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&v(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!v(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function w(t,e,i){var n,r,o,a,u=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===n?c(t,r,e):(o=ct[r],c(t,o+F+1,e),a=et[o],0!==a&&(r-=ut[o],h(t,r,a)),n--,o=s(n),c(t,o,i),a=it[o],0!==a&&(n-=lt[o],h(t,n,a)));while(u<t.last_lit);c(t,X,e)}function b(t,e){var i,n,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,h=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=q,i=0;i<h;i++)0!==o[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)r=t.heap[++t.heap_len]=c<2?++c:0,o[2*r]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=c,i=t.heap_len>>1;i>=1;i--)y(t,o,i);r=h;do i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],y(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,o[2*r]=o[2*i]+o[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,o[2*i+1]=o[2*n+1]=r,t.heap[1]=r++,y(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],d(t,e),p(o,c,t.bl_count)}function x(t,e,i){var n,r,o=-1,s=e[1],a=0,h=7,c=4;for(0===s&&(h=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++a<h&&r===s||(a<c?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*K]++):a<=10?t.bl_tree[2*Q]++:t.bl_tree[2*tt]++,a=0,o=r,0===s?(h=138,c=3):r===s?(h=6,c=3):(h=7,c=4))}function S(t,e,i){var n,r,o=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++a<u&&r===s)){if(a<l){do c(t,r,t.bl_tree);while(0!==--a)}else 0!==r?(r!==o&&(c(t,r,t.bl_tree),a--),c(t,K,t.bl_tree),h(t,a-3,2)):a<=10?(c(t,Q,t.bl_tree),h(t,a-3,3)):(c(t,tt,t.bl_tree),h(t,a-11,7));a=0,o=r,0===s?(u=138,l=3):r===s?(u=6,l=3):(u=7,l=4)}}function k(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),b(t,t.bl_desc),e=J-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function C(t,e,i,n){var r;for(h(t,e-257,5),h(t,i-1,5),h(t,n-4,4),r=0;r<n;r++)h(t,t.bl_tree[2*rt[r]+1],3);S(t,t.dyn_ltree,e-1),S(t,t.dyn_dtree,i-1)}function A(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return N;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return O;for(e=32;e<F;e++)if(0!==t.dyn_ltree[2*e])return O;return N}function T(t){gt||(f(),gt=!0),t.l_desc=new o(t.dyn_ltree,dt),t.d_desc=new o(t.dyn_dtree,pt),t.bl_desc=new o(t.bl_tree,ft),t.bi_buf=0,t.bi_valid=0,g(t)}function E(t,e,i,n){h(t,($<<1)+(n?1:0),3),m(t,e,i,!0)}function I(t){h(t,L<<1,3),c(t,X,st),l(t)}function M(t,e,i,n){var r,o,s=0;t.level>0?(t.strm.data_type===R&&(t.strm.data_type=A(t)),b(t,t.l_desc),b(t,t.d_desc),s=k(t),r=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&e!==-1?E(t,e,i,n):t.strategy===P||o===r?(h(t,(L<<1)+(n?1:0),3),w(t,st,at)):(h(t,(W<<1)+(n?1:0),3),C(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),w(t,t.dyn_ltree,t.dyn_dtree)),g(t),n&&_(t)}function z(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(ct[i]+F+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var D=t("../utils/common"),P=4,N=0,O=1,R=2,$=0,L=1,W=2,j=3,B=258,U=29,F=256,V=F+1+U,H=30,J=19,q=2*V+1,G=15,Y=16,Z=7,X=256,K=16,Q=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],it=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ot=512,st=new Array(2*(V+2));n(st);var at=new Array(2*H);n(at);var ht=new Array(ot);n(ht);var ct=new Array(B-j+1);n(ct);var ut=new Array(U);n(ut);var lt=new Array(H);n(lt);var dt,pt,ft,gt=!1;i._tr_init=T,i._tr_stored_block=E,i._tr_flush_block=M,i._tr_tally=z,i._tr_align=I},{"../utils/common":1}],8:[function(t,e,i){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}],"/lib/deflate.js":[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=h.assign({level:v,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==g)throw new Error(u[i]);e.header&&a.deflateSetHeader(this.strm,e.header)}function r(t,e){var i=new n(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}function o(t,e){return e=e||{},e.raw=!0,r(t,e)}function s(t,e){return e=e||{},e.gzip=!0,r(t,e)}var a=t("./zlib/deflate"),h=t("./utils/common"),c=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),d=Object.prototype.toString,p=0,f=4,g=0,_=1,m=2,v=-1,y=0,w=8;n.prototype.push=function(t,e){var i,n,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?f:p,"string"==typeof t?r.input=c.string2buf(t):"[object ArrayBuffer]"===d.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new h.Buf8(o),r.next_out=0,r.avail_out=o),i=a.deflate(r,n),i!==_&&i!==g)return this.onEnd(i),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||n!==f&&n!==m)||("string"===this.options.to?this.onData(c.buf2binstring(h.shrinkBuf(r.output,r.next_out))):this.onData(h.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&i!==_);return n===f?(i=a.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===g):n!==m||(this.onEnd(g),r.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===g&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Deflate=n,i.deflate=r,i.deflateRaw=o,i.gzip=s},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")}),y=function(){"use strict";var t="2.1.1",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(t){for(var e={},i=0,n=t.length;i<n;i++)e[t.charAt(i)]=i;return e}(e),n=String.fromCharCode,r=function(t){var e;return t.length<2?(e=t.charCodeAt(0),e<128?t:e<2048?n(192|e>>>6)+n(128|63&e):n(224|e>>>12&15)+n(128|e>>>6&63)+n(128|63&e)):(e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320),n(240|e>>>18&7)+n(128|e>>>12&63)+n(128|e>>>6&63)+n(128|63&e))},o=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=function(t){return t.replace(o,r)},a=function(t){var i=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),r=[e.charAt(n>>>18),e.charAt(n>>>12&63),i>=2?"=":e.charAt(n>>>6&63),i>=1?"=":e.charAt(63&n)];return r.join("")},h=function(t){return t.replace(/[\s\S]{1,3}/g,a)},c=function(t,e){return e?h(s(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):h(s(t))},u=function(t){return c(t,!0)},l=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),i=e-65536;return n((i>>>10)+55296)+n((1023&i)+56320);case 3:return n((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return n((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},p=function(t){return t.replace(l,d)},f=function(t){var e=t.length,r=e%4,o=(e>0?i[t.charAt(0)]<<18:0)|(e>1?i[t.charAt(1)]<<12:0)|(e>2?i[t.charAt(2)]<<6:0)|(e>3?i[t.charAt(3)]:0),s=[n(o>>>16),n(o>>>8&255),n(255&o)];return s.length-=[0,0,2,1][r],s.join("")},g=function(t){return t.replace(/[\s\S]{1,4}/g,f)},_=function(t){return p(g(t.replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")))};return{VERSION:t,atob:g,btoa:h,utob:s,encode:c,encodeURI:u,btou:p,decode:_}}();r.prototype.base64Encode=function(t){return y.encode(t)},r.prototype.btoa=function(t){return y.btoa(t)},r.prototype.atob=function(t){return y.atob(t)},r.prototype.base64EncodeUri=function(t){return y.encodeURI(t)},r.prototype.base64Decode=function(t){return y.decode(t)},r.prototype.gzip=function(t,e){return v.gzip(t,{to:"string"})},r.prototype.punyCode=function(t){return m.encode(t)},r.prototype.clone=function(t){return JSON.parse(JSON.stringify(t))},r.prototype.getConfig=function(t,e){e=e||{};var i={};for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)?"object"!=typeof t[n]||Array.isArray(t[n])?i[n]=this.clone(e[n]):i[n]=this.getConfig(t[n],e[n]):i[n]=this.clone(t[n]));return i},this.tools=new r,this.config=e||{};var w=this.tools.getConfig({logLevel:"warning",testCookieName:"check"},this.config);o.prototype._log=function(t,e){t<this.INFO?console.debug(e):t<this.NOTICE?console.log(e):t<this.WARNING?console.info(e):t<this.ERROR?console.warn(e):console.error(e)},o.prototype.getLevelName=function(t){if(isNaN(t)||"undefined"==typeof this._levels[t])throw new Error('LeozaLoggerManager: Unknown level "'+t+'"');return this._levels[t]},o.prototype.getLevelByName=function(t){if(t=t.toUpperCase(),!this.hasOwnProperty(t))throw new Error('LeozaLoggerManager: Unknown level name "'+t+'"');return this[t]},o.prototype.setLevel=function(t){this._level=this.getLevelByName(t)},o.prototype.getLevel=function(){return this.getLevelName(this._level)},o.prototype._getTime=function(){var t=((new Date).getTime()-this._startTime)/1e3,e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=t-3600*e-60*i,r=e.toString();r.length<2&&(r="0"+r);var o=i.toString();o.length<2&&(o="0"+o);var s=n.toFixed(3);return s.length<6&&(s="0"+s),r+":"+o+":"+s},o.prototype.log=function(t,e,i){var n=this.getLevelByName(t),r="["+this._getTime()+"] "+e+"."+t.toUpperCase()+": "+i;
this._useBuffer?this._buffer.push([n,r]):n>=this._level&&this._log(n,r)},o.prototype.flush=function(){if(this._useBuffer){for(var t in this._buffer)if(this._buffer.hasOwnProperty(t)){var e=this._buffer[t].shift(),i=this._buffer[t].shift();e>=this._level&&this._log(e,i)}this._useBuffer=!1,this._buffer=[]}},o.prototype.getLogger=function(t){return new s(this,t)},s.prototype.log=function(t,e){this._manager.log(t,this._channel,e)},s.prototype.ultra=function(t){this.log("ULTRA",t)},s.prototype.debug=function(t){this.log("DEBUG",t)},s.prototype.info=function(t){this.log("INFO",t)},s.prototype.notice=function(t){this.log("NOTICE",t)},s.prototype.warning=function(t){this.log("WARNING",t)},s.prototype.error=function(t){this.log("ERROR",t)},s.prototype.critical=function(t){this.log("CRITICAL",t)},s.prototype.alert=function(t){this.log("ALERT",t)},s.prototype.emergency=function(t){this.log("EMERGENCY",t)},this.loggerManager=new o(w.logLevel,i),a.prototype._log=function(t,e){e?this._logger.ultra(t):this._logger.debug(t)},a.prototype.set=function(t,e,i,n){var r=new Date;n=!!n,"undefined"==typeof e?(r.setFullYear(1978),this._document.cookie=t+"="+encodeURI(e)+";expires="+r.toGMTString()+";path=/",this._log("var "+t+" deleted",n)):!isNaN(i)&&i>0?(i=Math.round(i),r=new Date(+r+1e3*i),this._document.cookie=t+"="+encodeURI(e)+";expires="+r.toGMTString()+";path=/",this._log("set: "+t+" = "+e+" [on "+i+" seconds]",n)):(this._document.cookie=t+"="+encodeURI(e)+";path=/",this._log("set: "+t+" = "+e+" [session]",n))},a.prototype.del=function(t){this.set(t),this._logger.debug("del: "+t)},a.prototype.get=function(t){var e="; "+this._document.cookie,i=e.split("; "+t+"=");if(2==i.length){var n=decodeURIComponent(i.pop().split(";").shift());return this._logger.debug("get: "+t+" = "+n),n}},a.prototype.test=function(){var t=this._testCookieName,e=Math.round(899*Math.random()+100)+"-data";return this.set(t,e),this.get(t)==e&&(this.del(t),!0)},this.cookiesManager=new a(this.loggerManager,this.window,w.testCookieName),h.prototype.subscribe=function(t,e,i,n){if("string"!=typeof t||!t)return this._logger.warning("Unable to subscribe on event: bad event name provided"),!1;t=t.toLowerCase();try{var r=new c(e,i,n)}catch(o){return this._logger.warning("Unable to subscribe on event: "+o),!1}return t in this._subscribers||(this._subscribers[t]=[]),this._subscribers[t].push(r),this._logger.debug('New subscriber "'+r.getName()+'" on "'+t+'" event registered [priority: '+r.getPriority()+"]"),!0},h.prototype.dispatch=function(t,e){if("string"!=typeof t||!t)throw this._logger.warning("Unable to dispatch event: bad event name provided"),new Error;t=t.toLowerCase(),this._logger.debug('Dispatching event "'+t+'"');var i=new u(t,e||{});if(!(t in this._subscribers))return this._logger.debug('no subscribers on "'+t+'" event'),i;var n=this._subscribers[t];n.sort(function(t,e){return t.getPriority()==e.getPriority()?0:t.getPriority()>e.getPriority()?-1:1});for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if(this._logger.debug("dispatching: "+o.getName()+" [priority: "+o.getPriority()+"]"),o.dispatch(i),!i.canPropagate)return i}return i},c.prototype.getName=function(){return this._name},c.prototype.getPriority=function(){return this._priority},c.prototype.dispatch=function(t){this._callback.call(null,t)},u.prototype.getName=function(){return this._name},u.prototype.stopPropagation=function(){this._isPropagating=!1},u.prototype.canPropagate=function(){return this._isPropagating},u.prototype.setAsDone=function(){this._result=!0},u.prototype.setAsFailed=function(){this._result=!1},u.prototype.getResult=function(){return this._result},this.eventManager=new h(this.loggerManager)}function e(t,e,n,o,s,a){this.container=t,this.logger=this.container.getLogger("client"),this.storage=e,this.config=this.container.getConfig({publicApiUrl:"https://tracker.cartprotector.com/",ajaxTimeout:7e3,retryAfter:100,triesCount:3,maxBadResponsesCount:3,minPingInterval:5e3,maxPingInterval:75e3,pingIntervalMultiplier:1.75}),this.id=n,this.env=new r(this.container,this.storage),a&&this.env.envStorage.getStaff().setShowToolbar(1),this.request=new g(this.id,this.env),this.runaway=new m(t),this.presenter=new f(t,e,o),this.collector=new i(t),this.toolbar=new k(this),this.canShowWidgets=!!s,this.showToolbar=this.env.envStorage.getStaff().getShowToolbar(),this.isWidgetContactsSent=!1,this.init()}function i(t){this.container=t}function n(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setResult(t.r||0).setEmail(t.e||"").setName(t.n||"").setPhone(t.p||"").setComments(t.c||"")}function r(t,e){this.container=t,this.storage=e,this.config=this.container.getConfig({saveEvery:2e3}),this.logger=this.container.getLogger("env"),this.envStorage=this.storage.getEnvStorage(),this.envStorage.getSummary().getVisitsCount()?(this.envSession=this.storage.getEnvSession(),this.envSession.getVisit().getPagesCount()||(this.envSession=new h,this.envStorage.getSummary().incVisitsCount())):(this.envStorage=new c,this.envSession=new h,this.envStorage.getSummary().incVisitsCount()),this._lastUpdateAt=this.container.getTimeMs(),this._wasSaved=!1,this.changePage();var i=this;this.container.eventManager.subscribe("env_update","env",function(t){i.update(t)}),this.isWidgetAlreadyLoaded=!1}function o(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setVisitsCount(t.v||0).setPagesCount(t.p||0).setWidgetsCount(t.w||0).setDuration(t.d||0).setUrl(t.u||"")}function s(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setLastWidgetShowAt(t.l||0).setOfferAcceptStatus(t.s||0)}function a(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setShowToolbar(t.t||0)}function h(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setVisit(t.v||{}).setPage(t.p||{})}function c(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setSummary(t.s||{}).setRelations(t.r||{}).setStaff(t.a||{})}function u(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setTrackerId(t.t||0).setAccountId(t.a||0).setVisitorId(t.v||"")}function l(t,e){this.container=t,this.logger=this.container.getLogger("identifier"),this.storage=e,this.config=this.container.getConfig({ajaxTimeout:7e3,idUrl:"https://tracker.cartprotector.com/id",iframeUrl:"https://tracker.cartprotector.com/if",iframeOrigin:"https://tracker.cartprotector.com",iframeTimeout:5e3}),this.init()}function d(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setCommand(t.c||"").setParameters(t.p||{})}function p(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setTitle(t.t||"").setHeadCode(t.h||"").setBodyCode(t.b||"").setSelectorsCode(t.s||{})}function f(t,e,i){this.container=t,this.logger=this.container.getLogger("presenter"),this.storage=e,this.lastEmail=i||"",this.init()}function g(t,e){this.id=t,this.env=e}function _(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setInstructions(t.i||[])}function m(t){this.container=t,this.logger=this.container.getLogger("runaway"),this.config=this.container.tools.getConfig({dangerZone:.02,activateAfter:500,maxPoints:10,precision:1e3},this.container.config),this.init()}function v(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setTitle(t.t||0).setHeadCode(t.h||0).setBodyCode(t.b||0).setSelectorsCode(t.s||[])}function y(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setWidgetCode(t.c||"").setTimeoutDelay(t.t||0).setRunawayDelay(t.r||0).setTime(t.i||0)}function w(t){if(t=t||{},"string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}this.setDuration(t.t||0).setReason(t.r||"")}function b(t){this.container=t,this.config=this.container.getConfig({cookiesTTL:315576e3,sessionTTL:900})}function x(e,i,n,r){this.isStarted=!1,this.showToolbar=!1,this.container=new t(e,i,r),this.logger=this.container.getLogger("app"),this.logger.info("Starting CARTPROTECTOR tracking"),"#cpd"===this.container.window.top.location.hash?(this.container.loggerManager.setLevel("debug"),this.logger.debug("Log level changed to DEBUG")):"#cpt"===this.container.window.top.location.hash&&(this.container.loggerManager.setLevel("debug"),this.logger.debug("Log level changed to DEBUG"),this.showToolbar=!0),this.container.loggerManager.flush(),this.storage=new b(this.container),this.id=new u,this.identifier=new l(this.container,this.storage),this.logger.debug("Waiting for DOM ready");var o=this;this.container.$(function(){try{o.init(n)?(o.start(),o.logger.info("Started")):o.logger.info("Stopped")}catch(t){o.logger.critical("Exception: "+t)}})}function S(t,e,i){this.container=t,this.logger=this.container.getLogger("widget"),this.state=0,this.wasShowed=!1,this.init(e,i||"")}function k(t){this.client=t,this.container=t.container,this.logger=this.container.getLogger("presenter"),this.isShowed=!1,this.id=null,this.prefix="",this.bindEventHandlers()}var C=+new Date;t.prototype.getLogger=function(t){return this.loggerManager.getLogger(t)},t.prototype.getTimeMs=function(){return this.time.getMs()},t.prototype.getTimeS=function(){return this.time.getS()},t.prototype.getConfig=function(t){return this.tools.getConfig(t,this.config)},e.prototype.init=function(){this.pingTimer=null,this.pingInterval=0,this.pingsSent=0,this.badResponsesCount=0,this.bindEventHandlers()},e.prototype.subscribe=function(t,e,i){var n=this;return this.container.eventManager.subscribe(t,"client",function(t){n[e](t)},i),this},e.prototype.bindEventHandlers=function(){this.subscribe("client_start","start").subscribe("client_stop","stop").subscribe("client_response","onResponse").subscribe("client_ping","ping").subscribe("instruction.stop","onStopTrackingInstruction").subscribe("instruction.send","onSendPageDataInstruction").subscribe("instruction.show","onShowWidgetInstruction").subscribe("widget_show","onWidgetShow",-8).subscribe("widget_result","onWidgetResult")},e.prototype.start=function(t){this.env.start(),this.showToolbar&&this.container.eventManager.dispatch("toolbar_show"),this.container.eventManager.dispatch("client_ping"),this.logger.debug("started"),t.setAsDone()},e.prototype.stop=function(t){this.container.eventManager.dispatch("presenter_stop"),this.stopPingTimer(),this.showToolbar&&this.container.eventManager.dispatch("toolbar_hide"),this.env.stop(),this.logger.debug("stopped"),t.setAsDone()},e.prototype.makeRequest=function(t,e,i){this.stopPingTimer(),e=e||0,i=i||!1,e++,this.pingsSent++,this.logger.debug("Making request [no: "+this.pingsSent+"; try: "+e+"]...");var n=this;this.container.$.ajax({type:"POST",url:this.config.publicApiUrl,data:JSON.stringify(t),dataType:"json",context:this.container.window,crossDomain:!0,timeout:this.config.ajaxTimeout,error:function(){return e>=n.config.triesCount?(n.logger.warning("Request failed."),n.badResponsesCount++,n.badResponsesCount>=n.config.maxBadResponsesCount?(n.logger.error("Max bad responses count reached. Stopping"),n.container.eventManager.dispatch("stop")):(n.logger.error("Unable to get response. Stopping..."),n.container.eventManager.dispatch("stop"))):void n.container.window.setTimeout(function(){n.logger.notice("Retrying to make request..."),n.makeRequest(t,e,i)},n.config.retryAfter)},success:function(r){n.scheduleNextPing(i),n.container.eventManager.dispatch("client_response",{requestData:t,response:new _(r),tries:e})}})},e.prototype.onResponse=function(t){var e=this,i=t.data.response;i.getInstructions().forEach(function(t){t.getCommand()&&e.container.eventManager.dispatch("instruction."+t.getCommand(),t.getParameters())}),t.setAsDone()},e.prototype.onStopTrackingInstruction=function(t){var e=new w(t.data);this.logger.debug("Stop tracking instruction received [reason: "+e.getReason()+"]"),this.storage.setIsStopped(e.getDuration()),this.canShowWidgets=!1,this.container.eventManager.dispatch("stop"),t.setAsDone()},e.prototype.onShowWidgetInstruction=function(t){return this.logger.debug("Show widget instruction received"),this.canShowWidgets||(this.logger.debug("Showing widgets on this page is restricted, skipping instruction"),t.setAsDone()),this.presenter.setWidgetInstruction(new y(t.data))?(this.env.widgetLoaded(),void t.setAsDone()):(this.logger.error("Unable to process show widget instruction"),t.setAsFailed())},e.prototype.onWidgetShow=function(t){if(t.getResult()){var e=this.presenter.getLastShowAt();if(!e)return this.logger.error("Unable to get last show time"),t.setAsFailed();this.env.widgetShowed(e),this.logger.debug("Widget showed"),t.setAsDone()}},e.prototype.onWidgetResult=function(t){var e=t.data.contacts;if(!e.isAsked())return t.setAsFailed();if(e.isAccepted()?(this.logger.debug("Widget accepted: contacts received"),this.env.widgetAccepted()):(this.logger.debug("Widget declined"),this.env.widgetDeclined()),!this.isWidgetContactsSent){var i=this.request.exportContacts(e);this.makeRequest(i,0,!0),this.isWidgetContactsSent=!0,this.logger.debug("Widget contacts sent")}t.setAsDone()},e.prototype.onSendPageDataInstruction=function(t){this.logger.debug("Send page data instruction received");var e=this.collector.collect(new v(t.data)),i=this.request.exportPageData(e);this.makeRequest(i,0,!0),t.setAsDone()},e.prototype.stopPingTimer=function(){this.pingTimer&&this.container.window.clearTimeout(this.pingTimer)},e.prototype.scheduleNextPing=function(t){t=t||!1,this.stopPingTimer(),t||(this.pingInterval=Math.round(this.pingInterval*this.config.pingIntervalMultiplier),this.pingInterval<this.config.minPingInterval&&(this.pingInterval=this.config.minPingInterval),this.pingInterval>this.config.maxPingInterval&&(this.pingInterval=this.config.maxPingInterval));var e=this;this.pingTimer=this.container.window.setTimeout(function(){e.container.eventManager.dispatch("client_ping")},this.pingInterval),this.logger.debug("Next ping scheduled in "+this.pingInterval+"ms")},e.prototype.ping=function(t){this.logger.debug("Ping"),this.makeRequest(this.request["export"]()),t.setAsDone()},i.prototype.collect=function(t){var e=this.container.$,i=this.container.window.document,n=e(i),r=new p;t.getTitle()&&r.setTitle(i.title),t.getHeadCode()&&r.setHeadCode(n.find("head").html()),t.getBodyCode()&&r.setBodyCode(n.find("body").html());var o=t.getSelectorsCode();for(var s in o)if(o.hasOwnProperty(s)){var a=o[s],h=n.find(a).html();"undefined"!=typeof h&&r.addSelectorCode(a,h)}return r},n.prototype["export"]=function(){var t={};return this.isAsked()&&(t.r=this._result,this.isAccepted()&&(this._email&&(t.e=this._email),this._name&&(t.n=this._name),this._phone&&(t.p=this._phone),this._comments&&(t.c=this._comments))),t},n.prototype.setResult=function(t){return t=parseInt(t||0),this._result=t>=0&&t<=2?t:0,this},n.prototype.setAsAccepted=function(){return this._result=1,this},n.prototype.setAsDeclined=function(){return this._result=2,this},n.prototype.isAsked=function(){return this._result>0},n.prototype.isAccepted=function(){return 1==this._result},n.prototype.isDeclined=function(){return 2==this._result},n.prototype.setEmail=function(t){return this._email=t||"",this},n.prototype.getEmail=function(){return this._email},n.prototype.setName=function(t){return this._name=t||"",this},n.prototype.getName=function(){return this._name},n.prototype.setPhone=function(t){return this._phone=t||"",this},n.prototype.getPhone=function(){return this._phone},n.prototype.setComments=function(t){return this._comments=t||"",this},n.prototype.getComments=function(){return this._comments},r.prototype["export"]=function(){var t={s:this.envStorage.getSummary()["export"](),v:this.envSession.getVisit()["export"](),p:this.envSession.getPage()["export"](),r:this.envStorage.getRelations()["export"]()};return this.isWidgetAlreadyLoaded&&(t.w=1),t},r.prototype.update=function(){var t=this.container.getTimeMs(),e=Math.round((t-this._lastUpdateAt)/1e3);(e>0||!this._wasSaved)&&(e>0&&(this.envStorage.getSummary().incDuration(e),this.envSession.getVisit().incDuration(e),this.envSession.getPage().incDuration(e),this._lastUpdateAt=t),this.storage.setEnvStorage(this.envStorage),this.storage.setEnvSession(this.envSession),this._wasSaved=!0,this.logger.debug("updated"))},r.prototype.changePage=function(){this.envSession.getPage().getUrl()&&this.update();var t=this.container.window.location.href;this.envSession.getPage().getUrl()!=t&&(this.envStorage.getSummary().incPagesCount(),this.envSession.getVisit().incPagesCount(),this.envSession.getPage().reset().setUrl(this.container.window.location.href),this._wasSaved=!1,this.logger.debug('page changed to "'+t+'"'),this.update())},r.prototype.widgetLoaded=function(){this.isWidgetAlreadyLoaded=!0},r.prototype.widgetShowed=function(t){this.envStorage.getSummary().incWidgetsCount(),this.envStorage.getRelations().setLastWidgetShowAt(t),this.envSession.getVisit().incWidgetsCount(),this.envSession.getPage().incWidgetsCount(),this.isWidgetAlreadyLoaded=!1,this.logger.debug("widget show registered"),this._wasSaved=!1,this.update()},r.prototype.widgetAccepted=function(){this.envStorage.getRelations().setAsAccepted(),this.logger.debug("widget accept registered"),this._wasSaved=!1,this.update()},r.prototype.widgetDeclined=function(){this.envStorage.getRelations().setAsDeclined(),this.logger.debug("widget decline registered"),this._wasSaved=!1,this.update()},r.prototype.start=function(){if(this.timer)this.logger.notice("unable to start auto saving: already started");else{var t=this;this.timer=this.container.window.setInterval(function(){t.container.eventManager.dispatch("env_update")},this.config.saveEvery),this.logger.debug("auto saving started with interval "+this.config.saveEvery+" ms")}},r.prototype.stop=function(){this.timer?(this.logger.debug("auto saving stopped"),this.container.window.clearInterval(this.timer),this.timer=null):this.logger.notice("unable to stop auto saving: already stopped")},o.prototype["export"]=function(){var t={};return this._visitsCount>0&&(t.v=this._visitsCount),this._pagesCount>0&&(t.p=this._pagesCount),this._widgetsCount>0&&(t.w=this._widgetsCount),this._duration>0&&(t.d=this._duration),this._url&&(t.u=this._url),t},o.prototype.exportJSON=function(){return JSON.stringify(this["export"]())},o.prototype.reset=function(){return this._visitsCount=0,this._pagesCount=0,this._widgetsCount=0,this._duration=0,this._url="",this},o.prototype._get=function(t){return t=parseInt(t||0),t>0?t:0},o.prototype.setVisitsCount=function(t){return this._visitsCount=this._get(t||0),this},o.prototype.getVisitsCount=function(){return this._visitsCount},o.prototype.incVisitsCount=function(){return this._visitsCount++,this},o.prototype.setPagesCount=function(t){return this._pagesCount=this._get(t||0),this},o.prototype.getPagesCount=function(){return this._pagesCount},o.prototype.incPagesCount=function(){return this._pagesCount++,this},o.prototype.setWidgetsCount=function(t){return this._widgetsCount=this._get(t||0),this},o.prototype.getWidgetsCount=function(){return this._widgetsCount},o.prototype.incWidgetsCount=function(){return this._widgetsCount++,this},o.prototype.setDuration=function(t){return this._duration=this._get(t||0),this},o.prototype.incDuration=function(t){return this._duration+=t,this},o.prototype.getDuration=function(){return this._duration},o.prototype.setUrl=function(t){return this._url=t||"",this},o.prototype.getUrl=function(){return this._url},s.prototype["export"]=function(){var t={};return this._lastWidgetShowAt>0&&(t.l=this._lastWidgetShowAt),this._offerAcceptStatus>0&&(t.s=this._offerAcceptStatus),t},s.prototype.exportJSON=function(){return JSON.stringify(this["export"]())},s.prototype._get=function(t){return t=parseInt(t||0),t>0?t:0},s.prototype.setLastWidgetShowAt=function(t){return this._lastWidgetShowAt=this._get(t||0),this},s.prototype.getLastWidgetShowAt=function(){return this._lastWidgetShowAt},s.prototype.setOfferAcceptStatus=function(t){return this._offerAcceptStatus=this._get(t||0),this},s.prototype.getOfferAcceptStatus=function(){return this._offerAcceptStatus},s.prototype.setAsAccepted=function(){return this.setOfferAcceptStatus(1)},s.prototype.setAsDeclined=function(){return this.setOfferAcceptStatus(2)},a.prototype["export"]=function(){var t={};return this._showToolbar>0&&(t.t=this._showToolbar),t},a.prototype.exportJSON=function(){return JSON.stringify(this["export"]())},a.prototype._get=function(t){return t=parseInt(t||0),t>0?t:0},a.prototype.setShowToolbar=function(t){return this._showToolbar=this._get(t||0),this},a.prototype.getShowToolbar=function(){return this._showToolbar},h.prototype["export"]=function(){return{v:this.getVisit()["export"](),p:this.getPage()["export"]()}},h.prototype.exportJSON=function(){return JSON.stringify(this["export"]())},h.prototype.setVisit=function(t){return this._visit=new o(t),this},h.prototype.getVisit=function(){return this._visit},h.prototype.setPage=function(t){return this._page=new o(t),this},h.prototype.getPage=function(){return this._page},c.prototype["export"]=function(){return{s:this.getSummary()["export"](),r:this.getRelations()["export"](!0),a:this.getStaff()["export"]()}},c.prototype.exportJSON=function(){return JSON.stringify(this["export"]())},c.prototype.setSummary=function(t){return this._summary=new o(t),this},c.prototype.getSummary=function(){return this._summary},c.prototype.setRelations=function(t){return this._relations=new s(t),this},c.prototype.getRelations=function(){return this._relations},c.prototype.setStaff=function(t){return this._staff=new a(t),this},c.prototype.getStaff=function(){return this._staff},u.prototype["export"]=function(){var t={};return this._trackerId>0&&(t.t=this._trackerId),this._accountId>0&&(t.a=this._accountId),this._visitorId&&(t.v=this._visitorId),t},u.prototype.setTrackerId=function(t){return t=parseInt(t||0),this._trackerId=t>0?t:0,this},u.prototype.getTrackerId=function(){return this._trackerId},u.prototype.setAccountId=function(t){return t=parseInt(t||0),this._accountId=t>0?t:0,this},u.prototype.getAccountId=function(){return this._accountId},u.prototype.setVisitorId=function(t){return this._visitorId=t||"",this},u.prototype.getVisitorId=function(){return this._visitorId},l.prototype.init=function(){this.isIframeLoaded=!1,this.iframeWaitTimer=0,this.isLocal=!1,this.iframeWindow=null,this.isStarted=!1,this.bindEventHandlers(),this.logger.debug("initialized")},l.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"identifier",function(t){i[e](t)}),this},l.prototype.bindEventHandlers=function(){this.subscribe("identifier_start","start").subscribe("identifier_stop","stop").subscribe("identifier_email","saveEmail").subscribe("identifier_iframe_message","onIframeMessage").subscribe("identifier_iframe_timeout","onIframeTimeout")},l.prototype.notDetected=function(){this.isStarted&&(this.logger.debug("Visitor id not detected"),this.container.eventManager.dispatch("identifier_fail"))},l.prototype.detected=function(t,e,i){if(this.isStarted){if(t=t||"",!t)return this.logger.error("Empty visitor id provided to identifier detected"),this.notDetected();i=i||"unknown",this.logger.debug("Visitor identified as "+t+" by "+i),this.isLocal||this.storage.setVisitorId(t),this.container.eventManager.dispatch("identifier_success",{id:t,email:e||""})}},l.prototype.start=function(t){if(this.isStarted)t.setAsFailed();else{this.logger.debug("start"),this.isStarted=!0;var e=this.storage.getVisitorId();e?(this.isLocal=!0,this.detected(e,"","local cookies")):this.startIframeIdentification(),t.setAsDone()}},l.prototype.stop=function(t){this.isStarted?(this.logger.debug("stop"),this.iframeWaitTimer&&this.container.window.clearTimeout(this.iframeWaitTimer),this.isIframeLoaded&&this.unloadIframe(),this.isStarted=!1,t.setAsDone()):t.setAsFailed()},l.prototype.startIframeIdentification=function(){this.logger.debug("Starting iframe identification");var t=this;this.container.$(this.container.window).on("message",function(e){var i=e.originalEvent||e;i.origin==t.config.iframeOrigin&&t.container.eventManager.dispatch("identifier_iframe_message",{event:e})}),this.iframeWaitTimer=this.container.window.setTimeout(function(){t.container.eventManager.dispatch("identifier_iframe_timeout")},this.config.iframeTimeout),this.loadIframe()},l.prototype.getIframeCode=function(){var t=this.container.window.location.protocol+"//"+this.container.tools.punyCode(this.container.window.location.host);return'<iframe id="_cp_iframe" name="_cp_iframe" src="'+this.config.iframeUrl+"?parent="+t+'" frameborder="no" scrolling="0" style="position:fixed;width:1px;height:1px;bottom:0;right:0;display:none;"></iframe>'},l.prototype.loadIframe=function(){this.isIframeLoaded||(this.container.$body.append(this.getIframeCode()),this.isIframeLoaded=!0,this.logger.debug("Iframe loaded"))},l.prototype.unloadIframe=function(){this.isIframeLoaded&&(this.container.$body.find("#_cp_iframe").remove(),this.isIframeLoaded=!1,this.logger.debug("Iframe unloaded"))},l.prototype.onIframeTimeout=function(t){this.logger.notice("Iframe identification timeout"),this.processLocalIdentification(),t.setAsDone()},l.prototype.onIframeMessage=function(t){if(this.logger.debug("Iframe message caught."),!t.data.hasOwnProperty("event"))return t.setAsFailed(),this.logger.error("Unable to process iframe message. Stopping..."),this.container.eventManager.dispatch("stop");this.iframeWaitTimer&&(this.container.window.clearTimeout(this.iframeWaitTimer),this.logger.debug("Iframe wait timer disabled"));var e=t.data.event.originalEvent||t.data.event;this.iframeWindow=e.source;var i=this.container.tools.getConfig({v:"",e:""},JSON.parse(e.data));i.v?this.detected(i.v,i.e,"iframe identification"):(this.logger.notice("Iframe message error"),this.processLocalIdentification()),t.setAsDone()},l.prototype.processLocalIdentification=function(){this.logger.debug("Making local identification"),this.unloadIframe();var t=this;this.container.$.ajax({type:"GET",url:this.config.idUrl,dataType:"json",context:this.container.window,crossDomain:!0,timeout:this.config.ajaxTimeout,error:function(){t.notDetected()},success:function(e){e=t.container.tools.getConfig({v:"",e:""},e),e.v?(t.storage.setVisitorId(e.v),t.isLocal=!0,t.detected(e.v,e.e,"local identification")):t.notDetected()}})},l.prototype.saveEmail=function(t){if(!this.isLocal&&this.isIframeLoaded){var e=t.data.email||"";e&&(this.logger.debug("Sending email to iframe"),this.iframeWindow.postMessage(e,this.config.iframeOrigin))}},d.prototype["export"]=function(){return{c:this._command,p:this._parameters}},d.prototype.setCommand=function(t){return this._command=t||"",this},d.prototype.getCommand=function(){return this._command},d.prototype.setParameters=function(t){return this._parameters=t||{},this},d.prototype.getParameters=function(){return this._parameters},p.prototype["export"]=function(){var t={};return this._title&&(t.t=this._title),this._headCode&&(t.h=this._headCode),this._bodyCode&&(t.b=this._bodyCode),t.s=this._selectorsCode,t},p.prototype.setTitle=function(t){return this._title=t||"",this},p.prototype.getTitle=function(){return this._title},p.prototype.setHeadCode=function(t){return this._headCode=t||"",this},p.prototype.getHeadCode=function(){return this._headCode},p.prototype.setBodyCode=function(t){return this._bodyCode=t||"",this},p.prototype.getBodyCode=function(){return this._bodyCode},p.prototype.setSelectorsCode=function(t){return this._selectorsCode=t||{},this},p.prototype.getSelectorsCode=function(){return this._selectorsCode},p.prototype.addSelectorCode=function(t,e){return this._selectorsCode[t]=e,this},f.prototype.init=function(){this.widget=null,this.minRunawayTimeMs=0,this.timeoutTimer=0,this.lastShowAt=0,this.newLastShowAt=0,this.instructionGotAt=0,this.bindEventHandlers(),this.logger.debug("initialized")},f.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"presenter",function(t){i[e](t)}),this},f.prototype.bindEventHandlers=function(){this.subscribe("presenter_stop","stop").subscribe("runaway","onRunaway").subscribe("presenter_timeout","onTimeout").subscribe("presenter_show","show")},f.prototype.wasShowed=function(){return!!this.widget&&this.widget.wasShowed},f.prototype.stop=function(t){if(this.widget){this.timeoutTimer&&this.container.window.clearTimeout(this.timeoutTimer),this.minRunawayTimeMs=0;var e=this.container.eventManager.dispatch("widget_remove");if(!e.getResult())return this.logger.error("Unable to stop: unable to remove previous widget"),t.setAsFailed()}this.widget=null,t.setAsDone()},f.prototype.setWidgetInstruction=function(t){var e=this.container.eventManager.dispatch("presenter_stop");if(!e.getResult())return this.logger.error("Unable to create widget: unable to stop"),!1;this.widget=new S(this.container,t.getWidgetCode(),this.lastEmail);var i;if(this.minRunawayTimeMs=1e3*t.getRunawayDelay(),this.minRunawayTimeMs>0&&(i=this.minRunawayTimeMs-this.container.getTimeMs(),i<0&&(i=0),this.logger.debug("Showing widget at runaway will activate in "+i+" ms")),t.getTimeoutDelay()>0)if(i=1e3*t.getTimeoutDelay()-this.container.getTimeMs(),this.logger.debug("Showing widget with runaway "),i>0){var n=this;this.timeoutTimer=this.container.window.setTimeout(function(){n.container.eventManager.dispatch("presenter_timeout")},i),this.logger.debug("Widget will show in "+i+" ms")}else this.container.eventManager.dispatch("presenter_timeout");return this.instructionGotAt=this.container.getTimeS(),this.newLastShowAt=t.getTime(),this.logger.debug("New widget created"),!0},f.prototype.onRunaway=function(t){if(this.minRunawayTimeMs&&this.widget&&!(this.minRunawayTimeMs>this.container.getTimeMs())){if(this.logger.debug("Runaway event caught"),this.wasShowed())this.logger.debug("Showing canceled: already showed");else{var e=this.container.eventManager.dispatch("presenter_show",{by:"runaway"});if(!e.getResult())return this.logger.error("Unable to process runaway: unable to show"),t.setAsFailed()}t.setAsDone()}},f.prototype.onTimeout=function(t){if(this.logger.debug("Timeout event caught"),this.wasShowed())this.logger.debug("Showing canceled: already showed");else{var e=this.container.eventManager.dispatch("presenter_show",{by:"timeout"});if(!e.getResult())return this.logger.error("Unable to process timeout: unable to show"),t.setAsFailed()}t.setAsDone()},f.prototype.show=function(t){if(!this.widget)return this.logger.error("Unable to show: widget not initialized"),t.setAsFailed();if(this.wasShowed())return this.logger.error("Unable to show: already showed"),t.setAsFailed();this.logger.debug("Showing widget"),this.lastShowAt=this.newLastShowAt+this.container.getTimeS()-this.instructionGotAt,this.logger.debug("Last show changed to "+this.lastShowAt);var e=this.container.eventManager.dispatch("widget_show");if(!e.getResult())return this.logger.error("Unable to show: unable to show widget"),t.setAsFailed();var i=t.data.by||"unknown";this.logger.debug("Showed (event: "+i+")"),t.setAsDone()},f.prototype.getLastShowAt=function(){return this.lastShowAt},g.prototype["export"]=function(){return{i:this.id["export"](),e:this.env["export"]()}},g.prototype.exportPageData=function(t){var e=this["export"]();return e.d=t["export"](),e},g.prototype.exportContacts=function(t){var e=this["export"]();return e.c=t["export"](),e},_.prototype["export"]=function(){var t={},e=this._instructions.length;if(e>0){t.i=[];for(var i=0;i<e;i++)t.i.push(this._instructions[i]["export"]())}return t},_.prototype.setInstructions=function(t){if(this._instructions=[],Array.isArray(t)){var e=t.length;if(e>0)for(var i=0;i<e;i++)this._instructions.push(new d(t[i]))}return this},_.prototype.getInstructions=function(){return this._instructions},m.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"runaway",function(t){i[e](t)}),this},m.prototype.bindEventHandlers=function(){this.subscribe("window_resize","onWindowResize").subscribe("window_mouse_move","onMouseMove").subscribe("window_mouse_leave","onMouseLeave");
},m.prototype.init=function(){this.timer=0,this.isVectorDanger=!1,this.points=[];this.$window=this.container.$(this.container.window),this.bindEventHandlers(),this.onWindowResize(),this.logger.debug("listener initialized")},m.prototype.deactivate=function(){this.timer&&(this.container.window.clearTimeout(this.timer),this.timer=0,this.logger.debug("timer deactivated"))},m.prototype.activate=function(){this.deactivate();var t=this;this.timer=this.container.window.setTimeout(function(){t.logger.debug("new event"),t.timer=0,t.container.eventManager.dispatch("runaway")},this.config.activateAfter),this.logger.debug("timer activated [delay "+this.config.activateAfter+" ms]")},m.prototype.onWindowResize=function(t){this.windowWidth=this.$window.width(),this.windowHeight=this.$window.height(),this.windowWidth<1&&(this.windowWidth=1),this.windowHeight<1&&(this.windowHeight=1),this.logger.debug("Window size changed to "+this.windowWidth+"x"+this.windowHeight)},m.prototype.onMouseMove=function(t){var e=t.data.event;this.deactivate(),this.newPoint(e.clientX,e.clientY)},m.prototype.newPoint=function(t,e){var i={x:t/this.windowWidth,y:e/this.windowHeight};this.points.push(i),this.points.length>this.config.maxPoints&&this.points.shift();var n=this.getExitPoint(this.points[0],i);n?this.isVectorDanger=n.y<=this.config.dangerZone:this.isVectorDanger=!1},m.prototype.getExitPoint=function(t,e){var i,n={x:e.x-t.x,y:e.y-t.y},r=n.x<0?e.x:1-e.x,o=n.y<0?e.y:1-e.y,s=0!=n.x?Math.abs(r/n.x):0,a=0!=n.y?Math.abs(o/n.y):0;if(i=s?a?s<a?s:a:s:a,!i)return!1;var h=this.config.precision;return{x:Math.round((e.x+n.x*i)*h)/h,y:Math.round((e.y+n.y*i)*h)/h}},m.prototype.onMouseLeave=function(t){this.isVectorDanger&&this.activate()},v.prototype["export"]=function(){var t={};return this._title&&(t.t=1),this._headCode&&(t.h=1),this._bodyCode&&(t.b=1),this._selectorsCode.length&&(t.s=this._selectorsCode),t},v.prototype.setTitle=function(t){return t=parseInt(t||0),this._title=t>0?1:0,this},v.prototype.getTitle=function(){return this._title},v.prototype.setHeadCode=function(t){return t=parseInt(t||0),this._headCode=t>0?1:0,this},v.prototype.getHeadCode=function(){return this._headCode},v.prototype.setBodyCode=function(t){return t=parseInt(t||0),this._bodyCode=t>0?1:0,this},v.prototype.getBodyCode=function(){return this._bodyCode},v.prototype.setSelectorsCode=function(t){return t=t||[],this._selectorsCode=Array.isArray(t)?t:[],this},v.prototype.getSelectorsCode=function(){return this._selectorsCode},y.prototype["export"]=function(){var t={c:this._widgetCode};return this._timeoutDelay>0&&(t.t=this._timeoutDelay),this._runawayDelay>0&&(t.r=this._runawayDelay),this._time>0&&(t.i=this._time),t},y.prototype.setWidgetCode=function(t){return this._widgetCode=t||"",this},y.prototype.getWidgetCode=function(){return this._widgetCode},y.prototype.setTimeoutDelay=function(t){return t=parseInt(t||0),this._timeoutDelay=t>0?t:0,this},y.prototype.getTimeoutDelay=function(){return this._timeoutDelay},y.prototype.setRunawayDelay=function(t){return t=parseInt(t||0),this._runawayDelay=t>0?t:0,this},y.prototype.getRunawayDelay=function(){return this._runawayDelay},y.prototype.setTime=function(t){return t=parseInt(t||0),this._time=t>0?t:0,this},y.prototype.getTime=function(){return this._time},w.prototype["export"]=function(){var t={};return this._duration>0&&(t.t=this._duration),this._reason&&(t.r=this._reason),t},w.prototype.setDuration=function(t){return t=parseInt(t||0),this._duration=t>0?t:0,this},w.prototype.getDuration=function(){return this._duration},w.prototype.setReason=function(t){return this._reason=t||"",this},w.prototype.getReason=function(){return this._reason},b.prototype.getEnvStorage=function(){return new c(this.container.cookiesManager.get("_cp_a"))},b.prototype.setEnvStorage=function(t){this.container.cookiesManager.set("_cp_a",t.exportJSON(),this.config.cookiesTTL,1)},b.prototype.getEnvSession=function(){return new h(this.container.cookiesManager.get("_cp_b"))},b.prototype.setEnvSession=function(t){this.container.cookiesManager.set("_cp_b",t.exportJSON(),this.config.sessionTTL,1)},b.prototype.getIsStopped=function(){return this.container.cookiesManager.get("_cp_s")||0},b.prototype.setIsStopped=function(t){t=t||0,t>0?this.container.cookiesManager.set("_cp_s",1,t):this.container.cookiesManager.set("_cp_s")},b.prototype.getVisitorId=function(){return this.container.cookiesManager.get("_cp_v")||""},b.prototype.setVisitorId=function(t){t=t||"",t?this.container.cookiesManager.set("_cp_v",t,this.config.cookiesTTL):this.container.cookiesManager.set("_cp_v")},x.prototype.init=function(t){if(t.hasOwnProperty("trackerId")&&t.trackerId>0)this.id.setTrackerId(t.trackerId),this.logger.info("Tracker id is "+this.id.getTrackerId());else{if(!(t.hasOwnProperty("accountId")&&t.accountId>0))throw"no id information provided";this.id.setAccountId(t.accountId),this.logger.info("Account id is "+this.id.getAccountId())}if(!this.container.cookiesManager.test())throw"cookies doesn't work";return this.logger.debug("Cookies checked"),this.storage.getIsStopped()?(this.logger.info("Stop pinging cookie set. Starting canceled."),!1):this.container.window.hasOwnProperty("_is_cp_started")&&this.container.window._is_cp_started?(this.logger.warning("Another copy of tracker is already started"),!1):(this.logger.debug("Double script run checked"),!0)},x.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"tracker",function(t){i[e](t)}),this},x.prototype.bindEventHandlers=function(){this.subscribe("stop","onStop").subscribe("identifier_fail","onIdentifierFail").subscribe("identifier_success","onIdentifierSuccess")},x.prototype.startDispatchingWindowEvents=function(){var t=this.container.eventManager,e=this.container.window;this.container.$(e).on("resize",function(e){t.dispatch("window_resize",{event:e})}),this.container.$(e.document).on("mousemove",function(e){t.dispatch("window_mouse_move",{event:e})}).on("mouseleave",function(e){t.dispatch("window_mouse_leave",{event:e})})},x.prototype.start=function(){this.container.window._is_cp_started=!0,this.logger.debug("Global start flag set"),this.isStarted=!0,this.bindEventHandlers(),this.startDispatchingWindowEvents(),this.checkRestrictions(),this.container.eventManager.dispatch("identifier_start")},x.prototype.checkRestrictions=function(){this.container.window.top.document.referrer.match(/yandex/i)&&(this.dontShowWidget=!0,this.logger.notice("Widget will not be showed on this page: visitor come from yandex"))},x.prototype.onIdentifierFail=function(t){this.logger.error("Visitor identification failed, stopping"),t.setAsDone()},x.prototype.onIdentifierSuccess=function(t){this.logger.debug("Visitor identification done, starting client"),this.id.setVisitorId(t.data.id||"");var i=(new e(this.container,this.storage,this.id,t.data.email||"",(!this.dontShowWidget),this.showToolbar),this.container.eventManager.dispatch("client_start"));i.getResult()?(this.logger.debug("Client started"),t.setAsDone()):(this.logger.error("Unable to start client, stopping tracker"),this.container.eventManager.dispatch("identifier_stop"),t.setAsFailed())},x.prototype.onStop=function(t){this.logger.notice("Stopping client");var e=this.container.eventManager.dispatch("client_stop");e.getResult()?t.setAsDone():t.setAsFailed()},S.prototype.init=function(t,e){this.bindEventHandlers();var i=this.container.$body.append(this.unpackCode(t));this.$back=i.find("#_sa_m_bg"),this.$widget=i.find("#_sa_m_wi"),this.widgetBaseStyle=this.$widget.attr("style"),this.$thankYou=i.find("#_sa_m_ty"),this.$close=i.find("#_sa_m_cl"),this.$submit=i.find("#_sa_m_su"),this.$ok=i.find("#_sa_m_ok"),this.$email=i.find("#_sa_m_em"),this.$email.length&&e&&this.$email.val(e),this.$name=i.find("#_sa_m_na"),this.$phone=i.find("#_sa_m_ph"),this.$comments=i.find("#_sa_m_co"),this.$emailError=i.find("#_sa_m_em_err"),this.$nameError=i.find("#_sa_m_na_err"),this.$phoneError=i.find("#_sa_m_ph_err"),this.bindWidgetHandlers()},S.prototype.unpackCode=function(t){return t=t.replace(/\|!/g,"!important;")},S.prototype.subscribe=function(t,e){var i=this;return this.container.eventManager.subscribe(t,"widget",function(t){i[e](t)}),this},S.prototype.bindEventHandlers=function(){this.subscribe("widget_show","show").subscribe("widget_hide","hide").subscribe("widget_switch","switchToThankYou").subscribe("widget_show_errors","showErrors").subscribe("widget_hide_errors","hideErrors").subscribe("widget_accept","accept").subscribe("widget_decline","decline").subscribe("widget_ok","ok").subscribe("widget_remove","remove").subscribe("window_resize","fixView").subscribe("widget_show","fixView").subscribe("widget_switch","fixView").subscribe("widget_show_errors","fixView").subscribe("widget_hide_errors","fixView")},S.prototype.bindWidgetHandlers=function(){var t=this.container.eventManager;this.container.$(this.container.window.document).on("keydown",function(e){var i=e.which>0?e.which:e.keyCode;if(27==i&&this.isVisible)return t.dispatch("widget_decline",{by:"escape"}),!1}),this.$back.on("click",function(){return t.dispatch("widget_decline",{by:"background"}),!1}),this.$close.on("click",function(){return t.dispatch("widget_decline",{by:"close"}),!1}),this.$submit.on("click",function(){return t.dispatch("widget_accept",{by:"submit"}),!1});var e=function(e){var i=e.which>0?e.which:e.keyCode;if(13==i)return t.dispatch("widget_accept",{by:"return"}),!1};this.$email.on("keydown",e),this.$name.on("keydown",e),this.$phone.on("keydown",e),this.$ok.on("click",function(){return t.dispatch("widget_ok"),!1})},S.prototype.show=function(t){return this.state?(this.logger.error("Unable to show widget: already showed"),t.setAsFailed()):(this.$back.show(),this.$widget.show(),this.$email.length&&this.$email.focus(),this.logger.debug("Widget showed"),this.state=1,this.wasShowed=!0,void t.setAsDone())},S.prototype.hide=function(t){return this.state?(this.$widget.hide(),1==this.state?this.$widget.hide():this.$thankYou.hide(),this.$back.hide(),this.logger.debug("Widget hidden"),this.state=0,void t.setAsDone()):(this.logger.error("Unable to hide widget: already hidden"),t.setAsFailed())},S.prototype.switchToThankYou=function(t){return this.state?2==this.state?(this.logger.error("Unable to switch to thank you: already switched"),t.setAsFailed()):this.$thankYou.length<1?(this.logger.error("Unable to switch to thank you: no this page"),t.setAsFailed()):(this.$widget.hide(),this.$thankYou.show(),this.state=2,void t.setAsDone()):(this.logger.error("Unable to switch to thank you: widget is hidden"),t.setAsFailed())},S.prototype.showErrors=function(t){var e=t.data,i=!1;e.getEmail()&&this.$email.length&&this.$emailError.length&&(this.$emailError.show(),this.$email.focus(),i=!0),e.getName()&&this.$name.length&&this.$nameError.length&&(this.$nameError.show(),i||(this.$name.focus(),i=!0)),e.getPhone()&&this.$phone.length&&this.$phoneError.length&&(this.$phoneError.show(),i||this.$phone.focus()),this.logger.debug("Widget errors showed"),t.setAsDone()},S.prototype.hideErrors=function(t){this.$email.length&&this.$emailError.length&&this.$emailError.hide(),this.$name.length&&this.$nameError.length&&this.$nameError.hide(),this.$phone.length&&this.$phoneError.length&&this.$phoneError.hide(),this.logger.debug("Widget errors hidden"),t.setAsDone()},S.prototype.decline=function(t){var e=t.data.by||"unknown";this.logger.debug("Widget closed by "+e);var i=new n;i.setAsDeclined();var r=this.container.eventManager.dispatch("widget_result",{contacts:i});return r.getResult()?(this.container.eventManager.dispatch("widget_hide"),void t.setAsDone()):(this.logger.error("Error while declining widget"),t.setAsFailed())},S.prototype.accept=function(t){var e=t.data.by||"unknown";this.logger.debug("Widget accepted by "+e),this.container.eventManager.dispatch("widget_hide_errors");var i=new n,r=new n,o=!1,s=this.$email.val().trim();if(this.isEmailValid(s)?i.setEmail(s):(o=!0,r.setEmail(!0)),this.$phone.length){var a=this.$phone.val().trim();a.length&&(this.isPhoneValid(a)?i.setPhone(a):(o=!0,r.setPhone(!0)))}if(this.$name.length){var h=this.$name.val().trim();h.length&&(this.isNameValid(h)?i.setName(h):(o=!0,r.setName(!0)))}if(this.$comments.length){var c=this.$comments.val().trim();c.length&&i.setComments(c)}if(o)return this.logger.notice("Widget data has errors"),this.container.eventManager.dispatch("widget_show_errors",r),t.setAsDone();i.setAsAccepted();var u=this.container.eventManager.dispatch("widget_result",{contacts:i});return u.getResult()?(this.$thankYou.length?this.container.eventManager.dispatch("widget_switch"):this.container.eventManager.dispatch("widget_hide"),void t.setAsDone()):(this.logger.error("Error while accepting widget"),t.setAsFailed())},S.prototype.ok=function(t){this.logger.debug("Widget sad thank you"),this.container.eventManager.dispatch("widget_hide"),t.setAsDone()},S.prototype.isEmailValid=function(t){return!!t.match(/@/)},S.prototype.isNameValid=function(t){return!0},S.prototype.isPhoneValid=function(t){return!0},S.prototype.remove=function(t){if(this.logger.debug("Removing widget"),this.state){var e=this.container.eventManager.dispatch("widget_hide");if(!e.getResult())return this.logger.error("Unable to remove widget: unable to hide it"),t.setAsFailed()}this.$thankYou.length&&this.$thankYou.remove(),this.$widget.remove(),this.$back.remove(),this.logger.debug("Widget removed"),t.setAsDone()},S.prototype.fixView=function(t){if(!this.state)return void this.$widget.attr("style",this.widgetBaseStyle+";display:none");var e,i,n=this.container.$,r=n(this.container.window),o=r.width(),s=r.height(),a=this.$widget.height();o>540?(e=Math.round(.9*s),i=s-50):o>=320?(e=Math.round(.95*s),i=s-10):(e=s,i=s);var h=e>i?i:e,c=h/a;c>1&&(c=1);var u=a*c,l=Math.round((s-u)/2);l<0&&(l=0);var d="";if(c<1){var p=(a/c-a)/2;d+="-moz-transform:scale("+c+") translateY(-"+p+"px);"}this.$widget.attr("style",this.widgetBaseStyle+";display:block;top: "+l+"px!important;"+d),this.$widget.animate({zoom:c},0)},k.prototype.subscribe=function(t,e,i){var n=this;return this.container.eventManager.subscribe(t,"toolbar",function(t){n[e](t)},i||0),this},k.prototype.bindEventHandlers=function(){this.subscribe("toolbar_show","show").subscribe("toolbar_hide","hide").subscribe("env_update","update",-8)},k.prototype.getToolbarCode=function(){this.id=Math.round(900*Math.random()+100),this.prefix="_cp_toolbar"+this.id;var t="margin:0;padding:0;width:100%;height:auto;display:block;clear:both;position:relative",e="position:fixed;margin:0;padding:0;bottom:0;left:0;right:0;height:32px;width:auto;z-index:2147483647;background-color:#4A4A4A",i="."+this.prefix+"_block{float:left;clear:none;width:auto;height:32px;padding:4px 12px;margin:0;line-height:24px;color:#ccc;font-family:Arial,sans-serif;font-size:14px;border-left:1px solid #ccc;text-decoration:none;}a."+this.prefix+"_block:hover,a."+this.prefix+"_block:active{background-color:#252525;color:#fff;}."+this.prefix+"_value{color:#8c8;font-weight:bold;margin-left:4px;}."+this.prefix+"_details{position:absolute;width:auto;background-color:#fff;border:1px solid #ccc;bottom:32px;margin-left:-13px;}."+this.prefix+"_details table{border-collapse:collapse;padding:0;margin:0;border:0;}."+this.prefix+"_details th,."+this.prefix+"_details td{padding:4px 6px;font-size:12px;background-color:#fff;border:0;margin:0;color:#333;font-weight:normal;}."+this.prefix+"_details td{font-weight:bold}",n='<div class="'+this.prefix+'_details" id="'+this.prefix+'_env_details" style="display:none"><table><tr><th colspan="2"><b>За все время</b></th></tr><tr><th>Показано виджетов</th><td id="'+this.prefix+'_env_summary_widgets">0</td></tr><tr><th>Номер посещения</th><td id="'+this.prefix+'_env_summary_visits">0</td></tr><tr><th>Просмотрено страниц</th><td id="'+this.prefix+'_env_summary_pages">0</td></tr><tr><th>Время на сайте, сек.</th><td id="'+this.prefix+'_env_summary_duration">0</td></tr><tr><th colspan="2"><b>За этот визит</b></th></tr><tr><th>Показано виджетов</th><td id="'+this.prefix+'_env_visit_widgets">0</td></tr><tr><th>Просмотрено страниц</th><td id="'+this.prefix+'_env_visit_pages">0</td></tr><tr><th>Время на сайте, сек.</th><td id="'+this.prefix+'_env_visit_duration">0</td></tr><tr><th colspan="2"><b>На этой странице</b></th></tr><tr><th>Показано виджетов</th><td id="'+this.prefix+'_env_page_widgets">0</td></tr><tr><th>Время на сайте, сек.</th><td id="'+this.prefix+'_env_page_duration">0</td></tr></table></div>';return code='<div id="'+this.prefix+'" style="'+t+'"><style>'+i+'</style><div style="'+e+'"><div class="'+this.prefix+'_block" style="border:0"><span>CART<b>PROTECTOR</b> TOOLBAR</span></div><div class="'+this.prefix+'_block"><span>Сайт</span><span class="'+this.prefix+'_value" id="'+this.prefix+'_tracker">unknown</span></div><div class="'+this.prefix+'_block"><span>Посетитель</span><span class="'+this.prefix+'_value" id="'+this.prefix+'_visitor">unknown</span></div><a class="'+this.prefix+'_block" id="'+this.prefix+'_env_block"><span>Визит/стр</span><span class="'+this.prefix+'_value" id="'+this.prefix+'_env">unknown</span>'+n+'</a><a class="'+this.prefix+'_block" id="'+this.prefix+'_close" style="float:right;"><span>X</span></a></div></div>'},k.prototype.show=function(t){if(!this.isShowed){this.container.$body.append(this.getToolbarCode());var e=this;this.container.$body.find("#"+this.prefix+"_close").on("click",function(){return e.dontShow(),!1});var i=this.container.$body.find("#"+this.prefix+"_env_details"),n=!1;this.container.$body.find("#"+this.prefix+"_env_block").on("mousemove",function(){n||(i.attr("style",""),n=!0)}).on("mouseleave",function(){n&&(i.attr("style","display:none"),n=!1)}),this.container.$body.find(),this.isShowed=!0,this.logger.info("Toolbar showed, id: "+this.prefix),this.update(),t.setAsDone()}},k.prototype.hide=function(t){this.isShowed&&(this.container.$body.find("#"+this.prefix).remove(),this.logger.info("Toolbar removed"),t.setAsDone())},k.prototype.update=function(t){if(this.isShowed){var e={tracker:this.client.id.getTrackerId(),visitor:this.client.id.getVisitorId(),env:this.client.env.envStorage.getSummary().getVisitsCount()+"/"+this.client.env.envSession.getVisit().getPagesCount(),env_summary_widgets:this.client.env.envStorage.getSummary().getWidgetsCount(),env_summary_visits:this.client.env.envStorage.getSummary().getVisitsCount(),env_summary_pages:this.client.env.envStorage.getSummary().getPagesCount(),env_summary_duration:this.client.env.envStorage.getSummary().getDuration(),env_visit_widgets:this.client.env.envSession.getVisit().getWidgetsCount(),env_visit_pages:this.client.env.envSession.getVisit().getPagesCount(),env_visit_duration:this.client.env.envSession.getVisit().getDuration(),env_page_widgets:this.client.env.envSession.getPage().getWidgetsCount(),env_page_duration:this.client.env.envSession.getPage().getDuration()};for(var i in e)e.hasOwnProperty(i)&&this.container.$body.find("#"+this.prefix+"_"+i).text(e[i]);this.logger.info("Toolbar data updated")}},k.prototype.dontShow=function(){this.client.env.envStorage.getStaff().setShowToolbar(0),this.container.eventManager.dispatch("toolbar_hide")};for(var A=window;A.hasOwnProperty("parent")&&A.parent.hasOwnProperty("location")&&A!==A.parent&&A.parent.location.host===A.location.host;)A=A.parent;var T;T="#cpd"===A.top.location.hash?"http://tracker.cartprotector.com:8088":A.location.protocol+"//tracker.cartprotector.com";var E={logLevel:"warning",testCookieName:"_cp_check",publicApiUrl:T+"/",idUrl:T+"/id",iframeUrl:T+"/if",iframeOrigin:T};new x(A,E,window._cp||A._cp||{},C)}();